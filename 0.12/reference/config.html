

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tsuru.conf reference &mdash; tsuru 0.12.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API reference" href="api.html" />
    <link rel="prev" title="bs" href="bs.html" /> 

<link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tsuru
          

          
          </a>

          
            
            
              <div class="version">
                0.12.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managing/index.html">Managing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Using</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/index.html">Advanced topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tsuru-client.html">tsuru client usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsuru-admin.html">tsuru-admin usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="crane.html">crane usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bs.html">bs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">tsuru.conf reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#notation">Notation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tsuru-configuration">tsuru configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#http-server">HTTP server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database-access">Database access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#email-configuration">Email configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#repository-configuration">Repository configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#authentication-configuration">Authentication configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#queue-configuration">Queue configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#admin-users">Admin users</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quota-management">Quota management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routers">Routers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Hipache</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-the-provisioner">Defining the provisioner</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-provisioner-configuration">Docker provisioner configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#iaas-configuration">IaaS configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-settings">General settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ec2-iaas">EC2 IaaS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloudstack-iaas">CloudStack IaaS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-iaas">Custom IaaS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sample-file">Sample file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tsuru</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference</a> &raquo;</li>
        
      <li>tsuru.conf reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/config.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tsuru-conf-reference">
<h1>tsuru.conf reference<a class="headerlink" href="#tsuru-conf-reference" title="Permalink to this headline">¶</a></h1>
<p>tsuru uses a configuration file in <a class="reference external" href="http://www.yaml.org/">YAML</a> format. This
document describes what each option means, and how it should look.</p>
<div class="section" id="notation">
<h2>Notation<a class="headerlink" href="#notation" title="Permalink to this headline">¶</a></h2>
<p>tsuru uses a colon to represent nesting in YAML. So, whenever this document says
something like <code class="docutils literal notranslate"><span class="pre">key1:key2</span></code>, it refers to the value of the <code class="docutils literal notranslate"><span class="pre">key2</span></code> that is
nested in the block that is the value of <code class="docutils literal notranslate"><span class="pre">key1</span></code>. For example,
<code class="docutils literal notranslate"><span class="pre">database:url</span></code> means:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="tsuru-configuration">
<h2>tsuru configuration<a class="headerlink" href="#tsuru-configuration" title="Permalink to this headline">¶</a></h2>
<p>This section describes tsuru’s core configuration. Other sections will include
configuration of optional components, and finally, a full sample file.</p>
<div class="section" id="http-server">
<h3>HTTP server<a class="headerlink" href="#http-server" title="Permalink to this headline">¶</a></h3>
<p>tsuru provides a REST API, that supports HTTP and HTTP/TLS (a.k.a. HTTPS). Here
are the options that affect how tsuru’s API behaves:</p>
<div class="section" id="listen">
<h4>listen<a class="headerlink" href="#listen" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">listen</span></code> defines in which address tsuru webserver will listen. It has the
form &lt;host&gt;:&lt;port&gt;. You may omit the host (example: <code class="docutils literal notranslate"><span class="pre">:8080</span></code>). This setting
has no default value.</p>
</div>
<div class="section" id="use-tls">
<h4>use-tls<a class="headerlink" href="#use-tls" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">use-tls</span></code> indicates whether tsuru should use TLS or not. This setting is
optional, and defaults to “false”.</p>
</div>
<div class="section" id="tls-cert-file">
<h4>tls:cert-file<a class="headerlink" href="#tls-cert-file" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">tls:cert-file</span></code> is the path to the X.509 certificate file configured to serve
the domain.  This setting is optional, unless <code class="docutils literal notranslate"><span class="pre">use-tls</span></code> is true.</p>
</div>
<div class="section" id="tls-key-file">
<h4>tls:key-file<a class="headerlink" href="#tls-key-file" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">tls:key-file</span></code> is the path to private key file configured to serve the
domain. This setting is optional, unless <code class="docutils literal notranslate"><span class="pre">use-tls</span></code> is true.</p>
</div>
<div class="section" id="server-read-timeout">
<h4>server:read-timeout<a class="headerlink" href="#server-read-timeout" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">server:read-timeout</span></code> is the timeout of reading requests in the server. This
is the maximum duration of any request to the tsuru server.</p>
<p>This is useful to avoid leaking connections, in case clients drop the
connection before end sending the request. The default value is 0, meaning no
timeout.</p>
</div>
<div class="section" id="server-write-timeout">
<h4>server:write-timeout<a class="headerlink" href="#server-write-timeout" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">server:write-timeout</span></code> is the timeout of writing responses in the server.</p>
<p>This is useful to avoid leaking connections, in case clients drop the
connection before reading the response from tsuru. The default value is 0,
meaning no timeout.</p>
</div>
<div class="section" id="disable-index-page">
<h4>disable-index-page<a class="headerlink" href="#disable-index-page" title="Permalink to this headline">¶</a></h4>
<p>tsuru API serves an index page with some basic instructions on how to use the
current target. It’s possible to disable this page by setting the
<code class="docutils literal notranslate"><span class="pre">disable-index-page</span></code> flag to true. It’s also possible to customize which
template will be used in the index page, see the next configuration entry for
more details.</p>
<p>This setting is optional, and defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="index-page-template">
<h4>index-page-template<a class="headerlink" href="#index-page-template" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">index-page-template</span></code> is the template that will be used for the index page.
It must use the <a class="reference external" href="http://golang.org/pkg/text/template/">Go template syntax</a>,
and tsuru will provide the following variables in the context of the template:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">tsuruTarget</span></code>: the target URL of the tsuru API serving the index page</li>
<li><code class="docutils literal notranslate"><span class="pre">userCreate</span></code>: a boolean indicating whether user registration is enabled
or disabled</li>
<li><code class="docutils literal notranslate"><span class="pre">nativeLogin</span></code>: a boolean indicating whether the API is configured to
use the native authentication scheme</li>
<li><code class="docutils literal notranslate"><span class="pre">keysEnabled</span></code>: a boolean indicating whether the API is configured to
manage SSH keys</li>
</ul>
</div></blockquote>
<p>It will also include a function used for querying configuration values, named
<code class="docutils literal notranslate"><span class="pre">getConfig</span></code>. Here is an example of the function usage:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    {{if getConfig &quot;use-tls&quot;}}
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>we&#39;re safe<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    {{else}}
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>we&#39;re not safe<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    {{end}}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>This setting is optional. When <code class="docutils literal notranslate"><span class="pre">index-page-template</span></code> is not defined, tsuru
will use the <a class="reference external" href="https://github.com/tsuru/tsuru/blob/master/api/index_templates.go">default template</a>.</p>
</div>
</div>
<div class="section" id="database-access">
<h3>Database access<a class="headerlink" href="#database-access" title="Permalink to this headline">¶</a></h3>
<p>tsuru uses MongoDB as a database manager to store information like users,
machines, containers, etc. You need to describe how tsuru will connect to your
database server. Therefore, it’s necessary to provide a <a class="reference external" href="https://docs.mongodb.org/manual/reference/connection-string/">MongoDB connection
string</a>.
Database related options are listed below:</p>
<div class="section" id="database-url">
<h4>database:url<a class="headerlink" href="#database-url" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">database:url</span></code> is the database connection string. It is a mandatory setting
and it has no default value. Examples of strings include basic <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> and
more advanced <code class="docutils literal notranslate"><span class="pre">mongodb://user:password&#64;127.0.0.1:27017/database</span></code>. Please refer
to <a class="reference external" href="http://docs.mongodb.org/manual/reference/connection-string/">MongoDB documentation</a> for more details
and examples of connection strings.</p>
</div>
<div class="section" id="database-name">
<h4>database:name<a class="headerlink" href="#database-name" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">database:name</span></code> is the name of the database that tsuru uses. It is a
mandatory setting and has no default value. An example of value is “tsuru”.</p>
</div>
<div class="section" id="database-logdb-url">
<span id="config-logdb"></span><h4>database:logdb-url<a class="headerlink" href="#database-logdb-url" title="Permalink to this headline">¶</a></h4>
<p>This setting is optional. If <code class="docutils literal notranslate"><span class="pre">database:logdb-url</span></code> is specified, tsuru will use
it as the connection string to the MongoDB server responsible for storing
application logs. If this value is not set, tsuru will use <code class="docutils literal notranslate"><span class="pre">database:url</span></code>
instead.</p>
<p>This setting is useful because tsuru may have to process a very large number of
log messages depending on the number of units deployed and applications
behavior. Every log message will trigger a insertion in MongoDB and this may
negatively impact the database performance. Other measures will be implemented
in the future to improve this, but for now, having the ability to use an
exclusive database server for logs will help mitigate the negative impact of log
writing.</p>
</div>
<div class="section" id="database-logdb-name">
<h4>database:logdb-name<a class="headerlink" href="#database-logdb-name" title="Permalink to this headline">¶</a></h4>
<p>This setting is optional. If <code class="docutils literal notranslate"><span class="pre">database:logdb-name</span></code> is specified, tsuru will
use it as the database name for storing application logs. If this value is not
set, tsuru will use <code class="docutils literal notranslate"><span class="pre">database:name</span></code> instead.</p>
</div>
</div>
<div class="section" id="email-configuration">
<h3>Email configuration<a class="headerlink" href="#email-configuration" title="Permalink to this headline">¶</a></h3>
<p>tsuru sends email to users when they request password recovery. In order to send
those emails, tsuru needs to be configured with some SMTP settings. Omitting
these settings won’t break tsuru, but users will not be able to reset their
password.</p>
<div class="section" id="smtp-server">
<h4>smtp:server<a class="headerlink" href="#smtp-server" title="Permalink to this headline">¶</a></h4>
<p>The SMTP server to connect to. It must be in the form &lt;host&gt;:&lt;port&gt;. Example:
“smtp.gmail.com:587”.</p>
</div>
<div class="section" id="smtp-user">
<h4>smtp:user<a class="headerlink" href="#smtp-user" title="Permalink to this headline">¶</a></h4>
<p>The user to authenticate with the SMTP sever. Currently, tsuru requires
authenticated sessions.</p>
</div>
<div class="section" id="smtp-password">
<h4>smtp:password<a class="headerlink" href="#smtp-password" title="Permalink to this headline">¶</a></h4>
<p>The password for authentication within the SMTP server.</p>
</div>
</div>
<div class="section" id="repository-configuration">
<h3>Repository configuration<a class="headerlink" href="#repository-configuration" title="Permalink to this headline">¶</a></h3>
<p>tsuru optionally uses <a class="reference external" href="https://github.com/tsuru/gandalf">Gandalf</a> to manage
git repositories. Gandalf exposes a REST API for repositories management and
tsuru needs information about the Gandalf HTTP server endpoint.</p>
<div class="section" id="repo-manager">
<h4>repo-manager<a class="headerlink" href="#repo-manager" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">repo-manager</span></code> represents the repository manager that tsuru-server should use.
For backward compatibility reasons, the default value is “gandalf”. Users can
disable repository and SSH key management by setting “repo-manager” to “none”.
For more details, please refer to the <a class="reference internal" href="../managing/repositories.html"><span class="doc">repository management page</span></a> in the documentation.</p>
</div>
<div class="section" id="git-api-server">
<h4>git:api-server<a class="headerlink" href="#git-api-server" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">git:api-server</span></code> is the address of the Gandalf API. It should define the
entire address, including protocol and port. Examples of value:
<code class="docutils literal notranslate"><span class="pre">http://localhost:9090</span></code> and <code class="docutils literal notranslate"><span class="pre">https://gandalf.tsuru.io:9595</span></code>.</p>
</div>
</div>
<div class="section" id="authentication-configuration">
<h3>Authentication configuration<a class="headerlink" href="#authentication-configuration" title="Permalink to this headline">¶</a></h3>
<p>tsuru has support for <code class="docutils literal notranslate"><span class="pre">native</span></code> and <code class="docutils literal notranslate"><span class="pre">oauth</span></code> authentication schemes.</p>
<p>The default scheme is <code class="docutils literal notranslate"><span class="pre">native</span></code> and it supports the creation of users in
tsuru’s internal database. It hashes passwords brcypt. Tokens are generated
during authentication and are hashed using SHA512.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">auth</span></code> section also controls whether user registration is on or off. When
user registration is off, only admin users are able to create new users.</p>
<div class="section" id="auth-scheme">
<h4>auth:scheme<a class="headerlink" href="#auth-scheme" title="Permalink to this headline">¶</a></h4>
<p>The authentication scheme to be used. The default value is <code class="docutils literal notranslate"><span class="pre">native</span></code>, the other
supported value is <code class="docutils literal notranslate"><span class="pre">oauth</span></code>.</p>
</div>
<div class="section" id="auth-user-registration">
<h4>auth:user-registration<a class="headerlink" href="#auth-user-registration" title="Permalink to this headline">¶</a></h4>
<p>This flag indicates whether user registration is enabled. This setting is
optional, and defaults to false.</p>
</div>
<div class="section" id="auth-hash-cost">
<h4>auth:hash-cost<a class="headerlink" href="#auth-hash-cost" title="Permalink to this headline">¶</a></h4>
<p>Required only with <code class="docutils literal notranslate"><span class="pre">native</span></code> chosen as <code class="docutils literal notranslate"><span class="pre">auth:scheme</span></code>.</p>
<p>This number indicates how many CPU time you’re willing to give to hashing
calculation. It is an absolute number, between 4 and 31, where 4 is faster and
less secure, while 31 is very secure and <em>very</em> slow.</p>
</div>
<div class="section" id="auth-token-expire-days">
<h4>auth:token-expire-days<a class="headerlink" href="#auth-token-expire-days" title="Permalink to this headline">¶</a></h4>
<p>Required only with <code class="docutils literal notranslate"><span class="pre">native</span></code> chosen as <code class="docutils literal notranslate"><span class="pre">auth:scheme</span></code>.</p>
<p>Whenever a user logs in, tsuru generates a token for him/her, and the user may
store the token. <code class="docutils literal notranslate"><span class="pre">auth:token-expire-days</span></code> setting defines the amount of days
that the token will be valid. This setting is optional, and defaults to “7”.</p>
</div>
<div class="section" id="auth-max-simultaneous-sessions">
<h4>auth:max-simultaneous-sessions<a class="headerlink" href="#auth-max-simultaneous-sessions" title="Permalink to this headline">¶</a></h4>
<p>tsuru can limit the number of simultaneous sessions per user. This setting is
optional, and defaults to “unlimited”.</p>
</div>
<div class="section" id="auth-oauth">
<h4>auth:oauth<a class="headerlink" href="#auth-oauth" title="Permalink to this headline">¶</a></h4>
<p>Every config entry inside <code class="docutils literal notranslate"><span class="pre">auth:oauth</span></code> are used when the <code class="docutils literal notranslate"><span class="pre">auth:scheme</span></code> is
set to “oauth”. Please check <a class="reference external" href="http://tools.ietf.org/html/rfc6749">rfc6749</a> for
more details.</p>
</div>
<div class="section" id="auth-oauth-client-id">
<h4>auth:oauth:client-id<a class="headerlink" href="#auth-oauth-client-id" title="Permalink to this headline">¶</a></h4>
<p>The client id provided by your OAuth server.</p>
</div>
<div class="section" id="auth-oauth-client-secret">
<h4>auth:oauth:client-secret<a class="headerlink" href="#auth-oauth-client-secret" title="Permalink to this headline">¶</a></h4>
<p>The client secret provided by your OAuth server.</p>
</div>
<div class="section" id="auth-oauth-scope">
<h4>auth:oauth:scope<a class="headerlink" href="#auth-oauth-scope" title="Permalink to this headline">¶</a></h4>
<p>The scope for your authentication request.</p>
</div>
<div class="section" id="auth-oauth-auth-url">
<h4>auth:oauth:auth-url<a class="headerlink" href="#auth-oauth-auth-url" title="Permalink to this headline">¶</a></h4>
<p>The URL used in the authorization step of the OAuth flow. tsuru CLI will receive
this URL and trigger the opening a browser on this URL with the necessary
parameters.</p>
<p>During the authorization step, tsuru CLI will start a server locally and set the
callback to <a class="reference external" href="http://localhost">http://localhost</a>:&lt;port&gt;, if <code class="docutils literal notranslate"><span class="pre">auth:oauth:callback-port</span></code> is set
tsuru CLI will use its value as &lt;port&gt;. If <code class="docutils literal notranslate"><span class="pre">auth:oauth:callback-port</span></code> isn’t
present tsuru CLI will automatically choose an open port.</p>
<p>The callback URL should be registered on your OAuth server.</p>
<p>If the chosen server requires the callback URL to match the same host and port
as the registered one you should register “<a class="reference external" href="http://localhost">http://localhost</a>:&lt;chosen port&gt;” and
set the <code class="docutils literal notranslate"><span class="pre">auth:oauth:callback-port</span></code> accordingly.</p>
<p>If the chosen server is more lenient and allows a different port to be used you
should register simply “<a class="reference external" href="http://localhost">http://localhost</a>” and leave <code class="docutils literal notranslate"><span class="pre">auth:oauth:callback-port</span></code>
empty.</p>
</div>
<div class="section" id="auth-oauth-token-url">
<h4>auth:oauth:token-url<a class="headerlink" href="#auth-oauth-token-url" title="Permalink to this headline">¶</a></h4>
<p>The URL used in the exchange token step of the OAuth flow.</p>
</div>
<div class="section" id="auth-oauth-info-url">
<h4>auth:oauth:info-url<a class="headerlink" href="#auth-oauth-info-url" title="Permalink to this headline">¶</a></h4>
<p>The URL used to fetch information about the authenticated user. tsuru expects a
json response containing a field called <code class="docutils literal notranslate"><span class="pre">email</span></code>.</p>
<p>tsuru will also make call this URL on every request to the API to make sure the
token is still valid and hasn’t been revoked.</p>
</div>
<div class="section" id="auth-oauth-collection">
<h4>auth:oauth:collection<a class="headerlink" href="#auth-oauth-collection" title="Permalink to this headline">¶</a></h4>
<p>The database collection used to store valid access tokens. Defaults to
“oauth_tokens”.</p>
</div>
<div class="section" id="auth-oauth-callback-port">
<h4>auth:oauth:callback-port<a class="headerlink" href="#auth-oauth-callback-port" title="Permalink to this headline">¶</a></h4>
<p>The port used in the callback URL during the authorization step. Check docs for
<code class="docutils literal notranslate"><span class="pre">auth:oauth:auth-url</span></code> for more details.</p>
</div>
</div>
<div class="section" id="queue-configuration">
<span id="config-queue"></span><h3>Queue configuration<a class="headerlink" href="#queue-configuration" title="Permalink to this headline">¶</a></h3>
<p>tsuru uses a work queue for asynchronous tasks.</p>
<p><code class="docutils literal notranslate"><span class="pre">queue:*</span></code> groups configuration settings for a MongoDB server that will be used
as storage for delayed execution of queued jobs.</p>
<p>This queue is used to manage creation and destruction of IaaS machines, but
tsuru may start using it in more places in the future.</p>
<p>It’s not mandatory to configure the queue, however creating and removing
machines using a IaaS provider will not be possible.</p>
<div class="section" id="queue-mongo-url">
<h4>queue:mongo-url<a class="headerlink" href="#queue-mongo-url" title="Permalink to this headline">¶</a></h4>
<p>Connection url for MongoDB server used to store task information.</p>
</div>
<div class="section" id="queue-mongo-database">
<h4>queue:mongo-database<a class="headerlink" href="#queue-mongo-database" title="Permalink to this headline">¶</a></h4>
<p>Database name used in MongoDB. This value will take precedence over any database
name already specified in the connection url.</p>
</div>
<div class="section" id="pubsub">
<span id="config-pubsub"></span><h4>pubsub<a class="headerlink" href="#pubsub" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub</span></code> configuration is optional and depends on a redis server instance.
It’s used only for following application logs (running <code class="docutils literal notranslate"><span class="pre">tsuru</span> <span class="pre">app-log</span> <span class="pre">-f</span></code>). If
this is not configured tsuru will fail when running <code class="docutils literal notranslate"><span class="pre">tsuru</span> <span class="pre">app-log</span> <span class="pre">-f</span></code>.</p>
<p>Previously the configuration for this redis server was inside <code class="docutils literal notranslate"><span class="pre">redis-queue:*</span></code>
keys shown below. Using these keys is deprecated and tsuru will start ignoring
them before 1.0 release.</p>
</div>
<div class="section" id="pubsub-redis-host">
<h4>pubsub:redis-host<a class="headerlink" href="#pubsub-redis-host" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-host</span></code> is the host of the Redis server to be used for pub/sub.
This settings is optional and defaults to “localhost”.</p>
</div>
<div class="section" id="pubsub-redis-port">
<h4>pubsub:redis-port<a class="headerlink" href="#pubsub-redis-port" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-port</span></code> is the port of the Redis server to be used for pub/sub.
This settings is optional and defaults to 6379.</p>
</div>
<div class="section" id="pubsub-redis-password">
<h4>pubsub:redis-password<a class="headerlink" href="#pubsub-redis-password" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-password</span></code> is the password of the Redis server to be used for
pub/sub. This settings is optional and defaults to “”, indicating that the Redis
server is not authenticated.</p>
</div>
<div class="section" id="pubsub-redis-db">
<h4>pubsub:redis-db<a class="headerlink" href="#pubsub-redis-db" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-db</span></code> is the database number of the Redis server to be used for
pub/sub. This settings is optional and defaults to 3.</p>
</div>
<div class="section" id="pubsub-pool-max-idle-conn">
<h4>pubsub:pool-max-idle-conn<a class="headerlink" href="#pubsub-pool-max-idle-conn" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:pool-max-idle-conn</span></code> is the maximum number of idle connections to
redis. Defaults to 20.</p>
</div>
<div class="section" id="pubsub-pool-idle-timeout">
<h4>pubsub:pool-idle-timeout<a class="headerlink" href="#pubsub-pool-idle-timeout" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:pool-idle-timeout</span></code> is the number of seconds idle connections will
remain in connection pool to redis. Defaults to 300.</p>
</div>
<div class="section" id="pubsub-redis-dial-timeout">
<h4>pubsub:redis-dial-timeout<a class="headerlink" href="#pubsub-redis-dial-timeout" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-dial-timeout</span></code> is the number of seconds used as dial timeout.
Defaults to 0.1.</p>
</div>
<div class="section" id="pubsub-redis-read-timeout">
<h4>pubsub:redis-read-timeout<a class="headerlink" href="#pubsub-redis-read-timeout" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-read-timeout</span></code> is the number of seconds used as read timeout.
Defaults to 1800 (30 minutes).</p>
</div>
<div class="section" id="pubsub-redis-write-timeout">
<h4>pubsub:redis-write-timeout<a class="headerlink" href="#pubsub-redis-write-timeout" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pubsub:redis-write-timeout</span></code> is the number of seconds used as write timeout.
Defaults to 0.5.</p>
</div>
<div class="section" id="redis-queue-host">
<h4>redis-queue:host<a class="headerlink" href="#redis-queue-host" title="Permalink to this headline">¶</a></h4>
<p>Deprecated. See <code class="docutils literal notranslate"><span class="pre">pubsub:redis-host</span></code>.</p>
</div>
<div class="section" id="redis-queue-port">
<h4>redis-queue:port<a class="headerlink" href="#redis-queue-port" title="Permalink to this headline">¶</a></h4>
<p>Deprecated. See <code class="docutils literal notranslate"><span class="pre">pubsub:redis-port</span></code>.</p>
</div>
<div class="section" id="redis-queue-password">
<h4>redis-queue:password<a class="headerlink" href="#redis-queue-password" title="Permalink to this headline">¶</a></h4>
<p>Deprecated. See <code class="docutils literal notranslate"><span class="pre">pubsub:redis-password</span></code>.</p>
</div>
<div class="section" id="redis-queue-db">
<h4>redis-queue:db<a class="headerlink" href="#redis-queue-db" title="Permalink to this headline">¶</a></h4>
<p>Deprecated. See <code class="docutils literal notranslate"><span class="pre">pubsub:redis-db</span></code>.</p>
</div>
</div>
<div class="section" id="admin-users">
<span id="config-admin-user"></span><h3>Admin users<a class="headerlink" href="#admin-users" title="Permalink to this headline">¶</a></h3>
<p>tsuru has a very simple way to identify admin users: an admin user is a user
that is the member of the admin team, and the admin team is defined in the
configuration file, using the <code class="docutils literal notranslate"><span class="pre">admin-team</span></code> setting.</p>
<div class="section" id="admin-team">
<span id="config-admin-team"></span><h4>admin-team<a class="headerlink" href="#admin-team" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">admin-team</span></code> is the name of the administration team for the current tsuru
installation. All members of the administration team is able to use the
<code class="docutils literal notranslate"><span class="pre">tsuru-admin</span></code> command.</p>
</div>
</div>
<div class="section" id="quota-management">
<h3>Quota management<a class="headerlink" href="#quota-management" title="Permalink to this headline">¶</a></h3>
<p>tsuru can, optionally, manage quotas. Currently, there are two available
quotas: apps per user and units per app.</p>
<p>tsuru administrators can control the default quota for new users and new apps
in the configuration file, and use <code class="docutils literal notranslate"><span class="pre">tsuru-admin</span></code> command to change quotas for
users or apps. Quota management is disabled by default, to enable it, just set
the desired quota to a positive integer.</p>
<div class="section" id="quota-units-per-app">
<h4>quota:units-per-app<a class="headerlink" href="#quota-units-per-app" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">quota:units-per-app</span></code> is the default value for units per-app quota. All new
apps will have at most the number of units specified by this setting. This
setting is optional, and defaults to “unlimited”.</p>
</div>
<div class="section" id="quota-apps-per-user">
<h4>quota:apps-per-user<a class="headerlink" href="#quota-apps-per-user" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">quota:apps-per-user</span></code> is the default value for apps per-user quota. All new
users will have at most the number of apps specified by this setting. This
setting is optional, and defaults to “unlimited”.</p>
</div>
</div>
<div class="section" id="logging">
<span id="config-logging"></span><h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<p>Tsuru supports three logging flavors, that can be enabled or disabled
altogether. The default behavior of tsuru is to send all logs to syslog, but it
can also send logs to the standard error stream or a file. It’s is possible to
use any combination of the three flavors at any time in tsuru configuration
(e.g.: write logs both to stderr and syslog, or a file and stderr, or to all of
the flavors simultaneously).</p>
<p>There’s also the possibility to enable or disable debugging log, via the debug
flag.</p>
<div class="section" id="debug">
<h4>debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">false</span></code> is the default value, so you won’t see any
noises on logs, to turn it on set it to true, e.g.: <code class="docutils literal notranslate"><span class="pre">debug:</span> <span class="pre">true</span></code></p>
</div>
<div class="section" id="log-file">
<h4>log:file<a class="headerlink" href="#log-file" title="Permalink to this headline">¶</a></h4>
<p>Use this to specify a path to a log file. If no file is specified, tsuru-server
won’t write logs to any file.</p>
</div>
<div class="section" id="log-disable-syslog">
<h4>log:disable-syslog<a class="headerlink" href="#log-disable-syslog" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">log:disable-syslog</span></code> indicates whether tsuru-server should disable the use of
syslog. <code class="docutils literal notranslate"><span class="pre">false</span></code> is the default value. If it’s <code class="docutils literal notranslate"><span class="pre">true</span></code>, tsuru-server won’t
send any logs to syslog.</p>
</div>
<div class="section" id="log-syslog-tag">
<h4>log:syslog-tag<a class="headerlink" href="#log-syslog-tag" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">log:syslog-tag</span></code> is the tag that will be attached to every log line. The
default value is “tsr”.</p>
</div>
<div class="section" id="log-use-stderr">
<h4>log:use-stderr<a class="headerlink" href="#log-use-stderr" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">log:use-stderr</span></code> indicates whether tsuru-server should write logs to standard
error stream. The default value is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
</div>
<div class="section" id="routers">
<span id="config-routers"></span><h3>Routers<a class="headerlink" href="#routers" title="Permalink to this headline">¶</a></h3>
<p>As of 0.10.0, all your router configuration should live under entries with the
format <code class="docutils literal notranslate"><span class="pre">routers:&lt;router</span> <span class="pre">name&gt;</span></code>.</p>
<div class="section" id="routers-router-name-type-type-hipache-galeb-vulcand">
<h4>routers:&lt;router name&gt;:type (type: hipache, galeb, vulcand)<a class="headerlink" href="#routers-router-name-type-type-hipache-galeb-vulcand" title="Permalink to this headline">¶</a></h4>
<p>Indicates the type of this router configuration. The standard router supported
by tsuru is <a class="reference external" href="https://github.com/hipache/hipache">hipache</a>. There is also
experimental support for <a class="reference external" href="http://galeb.io/">galeb</a> and <a class="reference external" href="https://docs.vulcand.io/">vulcand</a>).</p>
<p>Depending on the type, there are some specific configuration options available.</p>
</div>
<div class="section" id="routers-router-name-domain-type-hipache-galeb-vulcand">
<h4>routers:&lt;router name&gt;:domain (type: hipache, galeb, vulcand)<a class="headerlink" href="#routers-router-name-domain-type-hipache-galeb-vulcand" title="Permalink to this headline">¶</a></h4>
<p>The domain of the server running your router. Applications created with
tsuru will have a address of <code class="docutils literal notranslate"><span class="pre">http://&lt;app-name&gt;.&lt;domain&gt;</span></code></p>
</div>
<div class="section" id="routers-router-name-redis-server-type-hipache">
<h4>routers:&lt;router name&gt;:redis-server (type: hipache)<a class="headerlink" href="#routers-router-name-redis-server-type-hipache" title="Permalink to this headline">¶</a></h4>
<p>Redis server used by Hipache router. This same server (or a redis slave of it),
must be configured in your hipache.conf file.</p>
</div>
<div class="section" id="routers-router-name-api-url-type-galeb-vulcand">
<h4>routers:&lt;router name&gt;:api-url (type: galeb, vulcand)<a class="headerlink" href="#routers-router-name-api-url-type-galeb-vulcand" title="Permalink to this headline">¶</a></h4>
<p>The URL for the Galeb or vulcand manager API.</p>
</div>
<div class="section" id="routers-router-name-username-type-galeb">
<h4>routers:&lt;router name&gt;:username (type: galeb)<a class="headerlink" href="#routers-router-name-username-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager username.</p>
</div>
<div class="section" id="routers-router-name-password-type-galeb">
<h4>routers:&lt;router name&gt;:password (type: galeb)<a class="headerlink" href="#routers-router-name-password-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager password.</p>
</div>
<div class="section" id="routers-router-name-environment-type-galeb">
<h4>routers:&lt;router name&gt;:environment (type: galeb)<a class="headerlink" href="#routers-router-name-environment-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager environment used to create virtual hosts and backend pools.</p>
</div>
<div class="section" id="routers-router-name-farm-type-type-galeb">
<h4>routers:&lt;router name&gt;:farm-type (type: galeb)<a class="headerlink" href="#routers-router-name-farm-type-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager farm type used to create virtual hosts and backend pools.</p>
</div>
<div class="section" id="routers-router-name-plan-type-galeb">
<h4>routers:&lt;router name&gt;:plan (type: galeb)<a class="headerlink" href="#routers-router-name-plan-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager plan used to create virtual hosts and backend pools.</p>
</div>
<div class="section" id="routers-router-name-project-type-galeb">
<h4>routers:&lt;router name&gt;:project (type: galeb)<a class="headerlink" href="#routers-router-name-project-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager project used to create virtual hosts, backend pools and pools.</p>
</div>
<div class="section" id="routers-router-name-load-balance-policy-type-galeb">
<h4>routers:&lt;router name&gt;:load-balance-policy (type: galeb)<a class="headerlink" href="#routers-router-name-load-balance-policy-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager load balancing policy used to create backend pools.</p>
</div>
<div class="section" id="routers-router-name-rule-type-type-galeb">
<h4>routers:&lt;router name&gt;:rule-type (type: galeb)<a class="headerlink" href="#routers-router-name-rule-type-type-galeb" title="Permalink to this headline">¶</a></h4>
<p>Galeb manager rule type used to create rules.</p>
</div>
</div>
<div class="section" id="id1">
<h3>Hipache<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="hipache-redis-server">
<h4>hipache:redis-server<a class="headerlink" href="#hipache-redis-server" title="Permalink to this headline">¶</a></h4>
<p>Redis server used by Hipache router. This same server (or a redis slave of it),
must be configured in your hipache.conf file.</p>
<p>This setting is deprecated in favor of <code class="docutils literal notranslate"><span class="pre">routers:&lt;router</span> <span class="pre">name&gt;:type</span> <span class="pre">=</span> <span class="pre">hipache</span></code>
and <code class="docutils literal notranslate"><span class="pre">routers:&lt;router</span> <span class="pre">name&gt;:redis-server</span></code>.</p>
</div>
<div class="section" id="hipache-domain">
<h4>hipache:domain<a class="headerlink" href="#hipache-domain" title="Permalink to this headline">¶</a></h4>
<p>The domain of the server running your hipache server. Applications created with
tsuru will have a address of <code class="docutils literal notranslate"><span class="pre">http://&lt;app-name&gt;.&lt;hipache:domain&gt;</span></code>.</p>
<p>This setting is deprecated in favor of <code class="docutils literal notranslate"><span class="pre">routers:&lt;router</span> <span class="pre">name&gt;:type</span> <span class="pre">=</span> <span class="pre">hipache</span></code>
and <code class="docutils literal notranslate"><span class="pre">routers:&lt;router</span> <span class="pre">name&gt;:domain</span></code></p>
</div>
</div>
<div class="section" id="defining-the-provisioner">
<h3>Defining the provisioner<a class="headerlink" href="#defining-the-provisioner" title="Permalink to this headline">¶</a></h3>
<p>tsuru has extensible support for provisioners. A provisioner is a Go type that
satisfies the <cite>provision.Provisioner</cite> interface. By default, tsuru will use
<code class="docutils literal notranslate"><span class="pre">DockerProvisioner</span></code> (identified by the string “docker”), and now that’s the
only supported provisioner (Ubuntu Juju was supported in the past but its
support has been removed from tsuru).</p>
<div class="section" id="provisioner">
<h4>provisioner<a class="headerlink" href="#provisioner" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">provisioner</span></code> is the string the name of the provisioner that will be used by
tsuru. This setting is optional and defaults to “docker”.</p>
</div>
</div>
<div class="section" id="docker-provisioner-configuration">
<h3>Docker provisioner configuration<a class="headerlink" href="#docker-provisioner-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="docker-collection">
<h4>docker:collection<a class="headerlink" href="#docker-collection" title="Permalink to this headline">¶</a></h4>
<p>Database collection name used to store containers information.</p>
</div>
<div class="section" id="docker-port-allocator">
<span id="config-port-allocator"></span><h4>docker:port-allocator<a class="headerlink" href="#docker-port-allocator" title="Permalink to this headline">¶</a></h4>
<p>The choice of port allocator. There are two possible values:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">docker</span></code>: trust Docker to allocate ports. Meaning that whenever a
container restarts, the port might change (usually, it changes).</li>
<li><code class="docutils literal notranslate"><span class="pre">tsuru</span></code>: leverage port allocation to tsuru, so ports mapped to containers
never change.</li>
</ul>
</div></blockquote>
<p>The default value is “docker”.</p>
</div>
<div class="section" id="docker-registry">
<h4>docker:registry<a class="headerlink" href="#docker-registry" title="Permalink to this headline">¶</a></h4>
<p>For tsuru to work with multiple docker nodes, you will need a docker-registry.
This should be in the form of <code class="docutils literal notranslate"><span class="pre">hostname:port</span></code>, the scheme cannot be present.</p>
</div>
<div class="section" id="docker-registry-max-try">
<h4>docker:registry-max-try<a class="headerlink" href="#docker-registry-max-try" title="Permalink to this headline">¶</a></h4>
<p>Number of times tsuru will try to send a image to registry.</p>
</div>
<div class="section" id="docker-registry-auth-username">
<span id="config-registry-auth"></span><h4>docker:registry-auth:username<a class="headerlink" href="#docker-registry-auth-username" title="Permalink to this headline">¶</a></h4>
<p>The username used for registry authentication. This setting is optional, for
registries with authentication disabled, it can be omitted.</p>
</div>
<div class="section" id="docker-registry-auth-password">
<h4>docker:registry-auth:password<a class="headerlink" href="#docker-registry-auth-password" title="Permalink to this headline">¶</a></h4>
<p>The password used for registry authentication. This setting is optional, for
registries with authentication disabled, it can be omitted.</p>
</div>
<div class="section" id="docker-registry-auth-email">
<h4>docker:registry-auth:email<a class="headerlink" href="#docker-registry-auth-email" title="Permalink to this headline">¶</a></h4>
<p>The email used for registry authentication. This setting is optional, for
registries with authentication disabled, it can be omitted.</p>
</div>
<div class="section" id="docker-repository-namespace">
<h4>docker:repository-namespace<a class="headerlink" href="#docker-repository-namespace" title="Permalink to this headline">¶</a></h4>
<p>Docker repository namespace to be used for application and platform images. Images
will be tagged in docker as &lt;docker:repository-namespace&gt;/&lt;platform-name&gt; and
&lt;docker:repository-namespace&gt;/&lt;app-name&gt;</p>
</div>
<div class="section" id="docker-bs-image">
<span id="config-bs"></span><h4>docker:bs:image<a class="headerlink" href="#docker-bs-image" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">docker:bs:image</span></code> is the name of the Docker image to be used to create <a class="reference external" href="https://github.com/tsuru/bs">big
sibling</a> containers. The default value is
“tsuru/bs”, which represents <a class="reference external" href="https://registry.hub.docker.com/u/tsuru/bs/">the official image hosted at Docker Hub</a>, maintained by the tsuru team.</p>
</div>
<div class="section" id="docker-bs-socket">
<h4>docker:bs:socket<a class="headerlink" href="#docker-bs-socket" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">docker:bs:socket</span></code> is the path to the Unix socket in the Docker host. This
should be configured so bs can connect to Docker via socket instead of TCP.
This is an optional setting, when omitted, bs will talk to the Docker API using
the TCP endpoint.</p>
</div>
<div class="section" id="docker-bs-syslog-port">
<h4>docker:bs:syslog-port<a class="headerlink" href="#docker-bs-syslog-port" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">docker:bs:syslog-port</span></code> is the port in the Docker node that will be used by
the bs container for collecting logs. The default value is 1514.</p>
</div>
<div class="section" id="docker-max-workers">
<h4>docker:max-workers<a class="headerlink" href="#docker-max-workers" title="Permalink to this headline">¶</a></h4>
<p>Maximum amount of threads to be created when starting new containers, so tsuru
doesn’t start too much threads in the process of starting 1000 units, for
instance. Defaults to 0 which means unlimited.</p>
</div>
<div class="section" id="docker-router">
<span id="config-docker-router"></span><h4>docker:router<a class="headerlink" href="#docker-router" title="Permalink to this headline">¶</a></h4>
<p>Default router to be used to distribute requests to units. This should be the
name of a router configured under the <code class="docutils literal notranslate"><span class="pre">routers:&lt;name&gt;</span></code> key, see <a class="reference internal" href="#config-routers"><span class="std std-ref">routers</span></a>.</p>
<p>For backward compatibility reasons, the value <code class="docutils literal notranslate"><span class="pre">hipache</span></code> is also supported, and
it will use either configuration available under <code class="docutils literal notranslate"><span class="pre">router:hipache:*</span></code> or
<code class="docutils literal notranslate"><span class="pre">hipache:*</span></code>, in this order.</p>
<p>Note that as of 0.10.0, routers may be associated to plans, if when creating an
application the chosen plan has a router value it will be used instead of the
value set in <code class="docutils literal notranslate"><span class="pre">docker:router</span></code>.</p>
<p>The router defined in <code class="docutils literal notranslate"><span class="pre">docker:router</span></code> will only be used if the chosen plan
doesn’t specify one.</p>
</div>
<div class="section" id="docker-deploy-cmd">
<h4>docker:deploy-cmd<a class="headerlink" href="#docker-deploy-cmd" title="Permalink to this headline">¶</a></h4>
<p>The command that will be called in your platform when a new deploy happens. The
default value for platforms supported in tsuru’s basebuilder repository is
<code class="docutils literal notranslate"><span class="pre">/var/lib/tsuru/deploy</span></code>.</p>
</div>
<div class="section" id="docker-security-opts">
<h4>docker:security-opts<a class="headerlink" href="#docker-security-opts" title="Permalink to this headline">¶</a></h4>
<p>This setting describes a list of security options that will be passed to
containers. This setting must be a list, and has no default value. If one wants
to specify just one value, it’s still needed to use the list notation:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>docker:
  ...
  security-opts:
    - apparmor:PROFILE
</pre></div>
</div>
<p>For more details on the available options, please refer to the Docker
documentation: &lt;<a class="reference external" href="https://docs.docker.com/reference/run/#security-configuration">https://docs.docker.com/reference/run/#security-configuration</a>&gt;.</p>
</div>
<div class="section" id="docker-segregate">
<h4>docker:segregate<a class="headerlink" href="#docker-segregate" title="Permalink to this headline">¶</a></h4>
<p>Deprecated. As of tsuru 0.11.1, using segregate scheduler is the default
setting. See <a class="reference internal" href="../managing/segregate-scheduler.html"><span class="doc">Segregate Scheduler</span></a> for details.</p>
</div>
<div class="section" id="docker-scheduler-total-memory-metadata">
<span id="config-scheduler-memory"></span><h4>docker:scheduler:total-memory-metadata<a class="headerlink" href="#docker-scheduler-total-memory-metadata" title="Permalink to this headline">¶</a></h4>
<p>This value describes which metadata key will describe the total amount of
memory, in bytes, available to a docker node.</p>
</div>
<div class="section" id="docker-scheduler-max-used-memory">
<h4>docker:scheduler:max-used-memory<a class="headerlink" href="#docker-scheduler-max-used-memory" title="Permalink to this headline">¶</a></h4>
<p>This should be a value between 0.0 and 1.0 which describes which fraction of the
total amount of memory available to a server should be reserved for app units.</p>
<p>The amount of memory available is found based on the node metadata described by
<code class="docutils literal notranslate"><span class="pre">docker:scheduler:total-memory-metadata</span></code> config setting.</p>
<p>If this value is set, tsuru will try to find a node with enough unreserved
memory to fit the creation of new units, based on how much memory is required by
the plan used to create the application. If no node with enough unreserved
memory is found, tsuru will ignore memory restrictions and let the scheduler
choose any node.</p>
<p>This setting, along with <code class="docutils literal notranslate"><span class="pre">docker:scheduler:total-memory-metadata</span></code>, are also
used by node auto scaling. See <a class="reference internal" href="../advanced_topics/node_scaling.html"><span class="doc">node auto scaling</span></a> for more details.</p>
</div>
<div class="section" id="docker-cluster-storage">
<span id="config-cluster-storage"></span><h4>docker:cluster:storage<a class="headerlink" href="#docker-cluster-storage" title="Permalink to this headline">¶</a></h4>
<p>This setting has been removed. You shouldn’t define it anymore, the only storage
available for the docker cluster is now <code class="docutils literal notranslate"><span class="pre">mongodb</span></code>.</p>
</div>
<div class="section" id="docker-cluster-mongo-url">
<h4>docker:cluster:mongo-url<a class="headerlink" href="#docker-cluster-mongo-url" title="Permalink to this headline">¶</a></h4>
<p>Connection URL to the mongodb server used to store information about the docker
cluster.</p>
</div>
<div class="section" id="docker-cluster-mongo-database">
<h4>docker:cluster:mongo-database<a class="headerlink" href="#docker-cluster-mongo-database" title="Permalink to this headline">¶</a></h4>
<p>Database name to be used to store information about the docker cluster.</p>
</div>
<div class="section" id="docker-run-cmd-bin">
<h4>docker:run-cmd:bin<a class="headerlink" href="#docker-run-cmd-bin" title="Permalink to this headline">¶</a></h4>
<p>The command that will be called on the application image to start the
application. The default value for platforms supported in tsuru’s basebuilder
repository is <code class="docutils literal notranslate"><span class="pre">/var/lib/tsuru/start</span></code>.</p>
</div>
<div class="section" id="docker-run-cmd-port">
<h4>docker:run-cmd:port<a class="headerlink" href="#docker-run-cmd-port" title="Permalink to this headline">¶</a></h4>
<p>The tcp port that will be exported by the container to the node network. The
default value expected by platforms defined in tsuru’s basebuilder repository is
<code class="docutils literal notranslate"><span class="pre">8888</span></code>.</p>
</div>
<div class="section" id="docker-user">
<h4>docker:user<a class="headerlink" href="#docker-user" title="Permalink to this headline">¶</a></h4>
<p>The user tsuru will use to start the container. The value expected for
basebuilder platforms is <code class="docutils literal notranslate"><span class="pre">ubuntu</span></code>.</p>
</div>
<div class="section" id="docker-healing-heal-nodes">
<span id="config-healing"></span><h4>docker:healing:heal-nodes<a class="headerlink" href="#docker-healing-heal-nodes" title="Permalink to this headline">¶</a></h4>
<p>Boolean value that indicates whether tsuru should try to heal nodes that have
failed a specified number of times. Healing nodes is only available if the node
was created by tsuru itself using the IaaS configuration. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</div>
<div class="section" id="docker-healing-active-monitoring-interval">
<h4>docker:healing:active-monitoring-interval<a class="headerlink" href="#docker-healing-active-monitoring-interval" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds between calls to &lt;server&gt;/_ping in each one of the docker
nodes. If this value is 0 or unset tsuru will never call the ping URL. Defaults
to 0.</p>
</div>
<div class="section" id="docker-healing-disabled-time">
<h4>docker:healing:disabled-time<a class="headerlink" href="#docker-healing-disabled-time" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds tsuru disables a node after a failure. This setting is only
valid if <code class="docutils literal notranslate"><span class="pre">heal-nodes</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Defaults to 30 seconds.</p>
</div>
<div class="section" id="docker-healing-max-failures">
<h4>docker:healing:max-failures<a class="headerlink" href="#docker-healing-max-failures" title="Permalink to this headline">¶</a></h4>
<p>Number of consecutive failures a node should have before triggering a healing
operation. Only valid if <code class="docutils literal notranslate"><span class="pre">heal-nodes</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Defaults to 5.</p>
</div>
<div class="section" id="docker-healing-wait-new-time">
<h4>docker:healing:wait-new-time<a class="headerlink" href="#docker-healing-wait-new-time" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds tsuru should wait for the creation of a new node during the
healing process. Only valid if <code class="docutils literal notranslate"><span class="pre">heal-nodes</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. Defaults to
300 seconds (5 minutes).</p>
</div>
<div class="section" id="docker-healing-heal-containers-timeout">
<h4>docker:healing:heal-containers-timeout<a class="headerlink" href="#docker-healing-heal-containers-timeout" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds a container should be unresponsive before triggering the
recreation of the container. A container is deemed unresponsive if it doesn’t
call the set unit status URL (/apps/{app}/units/{unit}) with a <code class="docutils literal notranslate"><span class="pre">started</span></code>
status. If this value is 0 or unset tsuru will never try to heal unresponsive
containers. Defaults to 0.</p>
</div>
<div class="section" id="docker-healing-events-collection">
<h4>docker:healing:events_collection<a class="headerlink" href="#docker-healing-events-collection" title="Permalink to this headline">¶</a></h4>
<p>Collection name in mongodb used to store information about triggered healing
events. Defaults to <code class="docutils literal notranslate"><span class="pre">healing_events</span></code>.</p>
</div>
<div class="section" id="docker-healthcheck-max-time">
<h4>docker:healthcheck:max-time<a class="headerlink" href="#docker-healthcheck-max-time" title="Permalink to this headline">¶</a></h4>
<p>Maximum time in seconds to wait for deployment time health check to be
successful. Defaults to 120 seconds.</p>
</div>
<div class="section" id="docker-image-history-size">
<span id="config-image-history-size"></span><h4>docker:image-history-size<a class="headerlink" href="#docker-image-history-size" title="Permalink to this headline">¶</a></h4>
<p>Number of images available for rollback using <code class="docutils literal notranslate"><span class="pre">tsuru</span> <span class="pre">app-deploy-rollback</span></code>.
tsuru will try to delete older images, but it may not be able to due to it being
used as a layer to a newer image. tsuru will keep trying to remove these old
images until they are not used as layers anymore. Defaults to 10 images.</p>
</div>
<div class="section" id="docker-auto-scale-enabled">
<span id="config-docker-auto-scale"></span><h4>docker:auto-scale:enabled<a class="headerlink" href="#docker-auto-scale-enabled" title="Permalink to this headline">¶</a></h4>
<p>Enable node auto scaling. See <a class="reference internal" href="../advanced_topics/node_scaling.html"><span class="doc">node auto scaling</span></a> for more details. Defaults to false.</p>
</div>
<div class="section" id="docker-auto-scale-wait-new-time">
<h4>docker:auto-scale:wait-new-time<a class="headerlink" href="#docker-auto-scale-wait-new-time" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds tsuru should wait for the creation of a new node during the
scaling up process. Defaults to 300 seconds (5 minutes).</p>
</div>
<div class="section" id="docker-auto-scale-group-by-metadata">
<h4>docker:auto-scale:group-by-metadata<a class="headerlink" href="#docker-auto-scale-group-by-metadata" title="Permalink to this headline">¶</a></h4>
<p>Name of the metadata present in nodes that will be used for grouping nodes into
clusters. See <a class="reference internal" href="../advanced_topics/node_scaling.html"><span class="doc">node auto scaling</span></a> for more
details. Defaults to empty (all nodes belong the the same cluster).</p>
</div>
<div class="section" id="docker-auto-scale-metadata-filter">
<h4>docker:auto-scale:metadata-filter<a class="headerlink" href="#docker-auto-scale-metadata-filter" title="Permalink to this headline">¶</a></h4>
<p>Value of the metadata specified by <cite>docker:auto-scale:group-by-metadata</cite>. If
this is set, tsuru will only run auto scale algorithms for nodes in the cluster
defined by this value.</p>
</div>
<div class="section" id="docker-auto-scale-max-container-count">
<h4>docker:auto-scale:max-container-count<a class="headerlink" href="#docker-auto-scale-max-container-count" title="Permalink to this headline">¶</a></h4>
<p>Maximum number of containers per node, for count based scaling. See <a class="reference internal" href="../advanced_topics/node_scaling.html"><span class="doc">node
auto scaling</span></a> for more details.</p>
</div>
<div class="section" id="docker-auto-scale-prevent-rebalance">
<h4>docker:auto-scale:prevent-rebalance<a class="headerlink" href="#docker-auto-scale-prevent-rebalance" title="Permalink to this headline">¶</a></h4>
<p>Prevent rebalancing from happening when adding new nodes, or if a rebalance is
needed. See <a class="reference internal" href="../advanced_topics/node_scaling.html"><span class="doc">node auto scaling</span></a> for more
details.</p>
</div>
<div class="section" id="docker-auto-scale-run-interval">
<h4>docker:auto-scale:run-interval<a class="headerlink" href="#docker-auto-scale-run-interval" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds between two periodic runs of the auto scaling algorithm.
Defaults to 3600 seconds (1 hour).</p>
</div>
<div class="section" id="docker-auto-scale-scale-down-ratio">
<h4>docker:auto-scale:scale-down-ratio<a class="headerlink" href="#docker-auto-scale-scale-down-ratio" title="Permalink to this headline">¶</a></h4>
<p>Ratio used when scaling down. Must be greater than 1.0. See <a class="reference internal" href="../advanced_topics/node_scaling.html"><span class="doc">node auto
scaling</span></a> for more details. Defaults to 1.33.</p>
</div>
</div>
</div>
<div class="section" id="iaas-configuration">
<span id="id2"></span><h2>IaaS configuration<a class="headerlink" href="#iaas-configuration" title="Permalink to this headline">¶</a></h2>
<p>tsuru uses IaaS configuration to automatically create new docker nodes and
adding them to your cluster when using <code class="docutils literal notranslate"><span class="pre">docker-node-add</span></code> command. See
<a class="reference internal" href="../installing/adding-nodes.html"><span class="doc">adding nodes</span></a> for more details about how to use
this command.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">You should configure <a class="reference internal" href="#config-queue"><span class="std std-ref">queue</span></a> to be able to use IaaS.</p>
</div>
<div class="section" id="general-settings">
<h3>General settings<a class="headerlink" href="#general-settings" title="Permalink to this headline">¶</a></h3>
<div class="section" id="iaas-default">
<h4>iaas:default<a class="headerlink" href="#iaas-default" title="Permalink to this headline">¶</a></h4>
<p>The default IaaS tsuru will use when calling <code class="docutils literal notranslate"><span class="pre">docker-node-add</span></code> without
specifying <code class="docutils literal notranslate"><span class="pre">iaas=&lt;iaas_name&gt;</span></code> as a metadata. Defaults to <code class="docutils literal notranslate"><span class="pre">ec2</span></code>.</p>
</div>
<div class="section" id="iaas-node-protocol">
<h4>iaas:node-protocol<a class="headerlink" href="#iaas-node-protocol" title="Permalink to this headline">¶</a></h4>
<p>Which protocol to use when accessing the docker api in the created node.
Defaults to <code class="docutils literal notranslate"><span class="pre">http</span></code>.</p>
</div>
<div class="section" id="iaas-node-port">
<h4>iaas:node-port<a class="headerlink" href="#iaas-node-port" title="Permalink to this headline">¶</a></h4>
<p>In which port the docker API will be accessible in the created node. Defaults to
<code class="docutils literal notranslate"><span class="pre">2375</span></code>.</p>
</div>
<div class="section" id="iaas-collection">
<h4>iaas:collection<a class="headerlink" href="#iaas-collection" title="Permalink to this headline">¶</a></h4>
<p>Collection name on database containing information about created machines.
Defaults to <code class="docutils literal notranslate"><span class="pre">iaas_machines</span></code>.</p>
</div>
</div>
<div class="section" id="ec2-iaas">
<h3>EC2 IaaS<a class="headerlink" href="#ec2-iaas" title="Permalink to this headline">¶</a></h3>
<div class="section" id="iaas-ec2-key-id">
<h4>iaas:ec2:key-id<a class="headerlink" href="#iaas-ec2-key-id" title="Permalink to this headline">¶</a></h4>
<p>Your AWS key id.</p>
</div>
<div class="section" id="iaas-ec2-secret-key">
<h4>iaas:ec2:secret-key<a class="headerlink" href="#iaas-ec2-secret-key" title="Permalink to this headline">¶</a></h4>
<p>Your AWS secret key.</p>
</div>
<div class="section" id="iaas-ec2-user-data">
<h4>iaas:ec2:user-data<a class="headerlink" href="#iaas-ec2-user-data" title="Permalink to this headline">¶</a></h4>
<p>A url for which the response body will be sent to ec2 as user-data.
Defaults to a script which will run <a class="reference external" href="https://github.com/tsuru/now">tsuru now installation</a>.</p>
</div>
<div class="section" id="iaas-ec2-wait-timeout">
<h4>iaas:ec2:wait-timeout<a class="headerlink" href="#iaas-ec2-wait-timeout" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds to wait for the machine to be created. Defaults to 300 (5
minutes).</p>
</div>
</div>
<div class="section" id="cloudstack-iaas">
<h3>CloudStack IaaS<a class="headerlink" href="#cloudstack-iaas" title="Permalink to this headline">¶</a></h3>
<div class="section" id="iaas-cloudstack-api-key">
<h4>iaas:cloudstack:api-key<a class="headerlink" href="#iaas-cloudstack-api-key" title="Permalink to this headline">¶</a></h4>
<p>Your api key.</p>
</div>
<div class="section" id="iaas-cloudstack-secret-key">
<h4>iaas:cloudstack:secret-key<a class="headerlink" href="#iaas-cloudstack-secret-key" title="Permalink to this headline">¶</a></h4>
<p>Your secret key.</p>
</div>
<div class="section" id="iaas-cloudstack-url">
<h4>iaas:cloudstack:url<a class="headerlink" href="#iaas-cloudstack-url" title="Permalink to this headline">¶</a></h4>
<p>The url for the cloudstack api.</p>
</div>
<div class="section" id="iaas-cloudstack-user-data">
<h4>iaas:cloudstack:user-data<a class="headerlink" href="#iaas-cloudstack-user-data" title="Permalink to this headline">¶</a></h4>
<p>A url for which the response body will be sent to cloudstack as user-data.
Defaults to a script which will run <a class="reference external" href="https://github.com/tsuru/now">tsuru now installation</a>.</p>
</div>
<div class="section" id="iaas-cloudstack-wait-timeout">
<h4>iaas:cloudstack:wait-timeout<a class="headerlink" href="#iaas-cloudstack-wait-timeout" title="Permalink to this headline">¶</a></h4>
<p>Number of seconds to wait for the machine to be created. Defaults to 300 (5
minutes).</p>
</div>
</div>
<div class="section" id="custom-iaas">
<span id="config-custom-iaas"></span><h3>Custom IaaS<a class="headerlink" href="#custom-iaas" title="Permalink to this headline">¶</a></h3>
<p>You can define a custom IaaS based on an existing provider. Any configuration
keys with the format <code class="docutils literal notranslate"><span class="pre">iaas:custom:&lt;name&gt;</span></code> will create a new IaaS with
<code class="docutils literal notranslate"><span class="pre">name</span></code>.</p>
<div class="section" id="iaas-custom-name-provider">
<h4>iaas:custom:&lt;name&gt;:provider<a class="headerlink" href="#iaas-custom-name-provider" title="Permalink to this headline">¶</a></h4>
<p>The base provider name, it can be one of the supported providers: <code class="docutils literal notranslate"><span class="pre">cloudstack</span></code>
or <code class="docutils literal notranslate"><span class="pre">ec2</span></code>.</p>
</div>
<div class="section" id="iaas-custom-name-any-other-option">
<h4>iaas:custom:&lt;name&gt;:&lt;any_other_option&gt;<a class="headerlink" href="#iaas-custom-name-any-other-option" title="Permalink to this headline">¶</a></h4>
<p>This will overwrite the value of <code class="docutils literal notranslate"><span class="pre">iaas:&lt;provider&gt;:&lt;any_other_option&gt;</span></code> for this
IaaS. As an example, having the configuration below would allow you to call
<code class="docutils literal notranslate"><span class="pre">tsuru-admin</span> <span class="pre">docker-node-add</span> <span class="pre">iaas=region1_cloudstack</span> <span class="pre">...</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">iaas</span><span class="p">:</span>
    <span class="nt">custom</span><span class="p">:</span>
        <span class="nt">region1_cloudstack</span><span class="p">:</span>
            <span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cloudstack</span>
            <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://region1.url/</span>
            <span class="nt">secret-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mysecretkey</span>
    <span class="nt">cloudstack</span><span class="p">:</span>
        <span class="nt">api-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myapikey</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="sample-file">
<h2>Sample file<a class="headerlink" href="#sample-file" title="Permalink to this headline">¶</a></h2>
<p>Here is a complete example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">listen</span><span class="p">:</span> <span class="s">&quot;0.0.0.0:8080&quot;</span>
<span class="nt">debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://&lt;machine-public-addr&gt;:8080</span> <span class="c1"># This port must be the same as in the &quot;listen&quot; conf</span>
<span class="nt">admin-team</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="nt">auth</span><span class="p">:</span>
    <span class="nt">user-registration</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">scheme</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">native</span>
<span class="nt">database</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;your-mongodb-server&gt;:27017</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tsurudb</span>
<span class="nt">pubsub</span><span class="p">:</span>
    <span class="nt">redis-host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;your-redis-server&gt;</span>
    <span class="nt">redis-port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6379</span>
<span class="nt">queue</span><span class="p">:</span>
    <span class="nt">mongo-url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;your-mongodb-server&gt;:27017</span>
    <span class="nt">mongo-database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">queuedb</span>
<span class="nt">git</span><span class="p">:</span>
    <span class="nt">api-server</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://&lt;your-gandalf-server&gt;:8000</span>
<span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">docker</span>
<span class="nt">docker</span><span class="p">:</span>
    <span class="nt">router</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hipache</span>
    <span class="nt">collection</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">docker_containers</span>
    <span class="nt">repository-namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tsuru</span>
    <span class="nt">deploy-cmd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/tsuru/deploy</span>
    <span class="nt">cluster</span><span class="p">:</span>
        <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mongodb</span>
        <span class="nt">mongo-url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;your-mongodb-server&gt;:27017</span>
        <span class="nt">mongo-database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cluster</span>
    <span class="nt">run-cmd</span><span class="p">:</span>
        <span class="nt">bin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/tsuru/start</span>
        <span class="nt">port</span><span class="p">:</span> <span class="s">&quot;8888&quot;</span>
<span class="nt">routers</span><span class="p">:</span>
    <span class="nt">hipache</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hipache</span>
        <span class="nt">domain</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;your-hipache-server-ip&gt;.xip.io</span>
        <span class="nt">redis-server</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;your-redis-server-with-port&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bs.html" class="btn btn-neutral" title="bs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, tsuru authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Versions</span>
    v: 0.12.4
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dd><a href="/stable/">stable</a></dd>
      <dd><a href="/latest/">latest</a></dd>
      <dd><a href="/main/">main</a></dd>
    </dl>
    <dl>
      <dt>Releases</dt>
      <dd><a href="/1.12/">1.12</a></dd>
      <dd><a href="/1.11/">1.11</a></dd>
      <dd><a href="/1.10/">1.10</a></dd>
      <dd><a href="/1.9/">1.9</a></dd>
      <dd><a href="/1.8/">1.8</a></dd>
      <dd><a href="/1.7/">1.7</a></dd>
      <dd><a href="/1.6/">1.6</a></dd>
      <dd><a href="/1.5/">1.5</a></dd>
      <dd><a href="/1.4/">1.4</a></dd>
      <dd><a href="/1.3/">1.3</a></dd>
      <dd><a href="/1.2/">1.2</a></dd>
      <dd><a href="/1.1/">1.1</a></dd>
      <dd><a href="/1.0/">1.0</a></dd>
      <dd><a href="/0.13/">0.13</a></dd>
      <dd><a href="/0.12/">0.12</a></dd>
      <dd><a href="/0.11/">0.11</a></dd>
      <dd><a href="/0.10/">0.10</a></dd>
      <dd><a href="/0.9/">0.9</a></dd>
      <dd><a href="/0.8/">0.8</a></dd>
      <dd><a href="/0.7/">0.7</a></dd>
      <dd><a href="/0.6/">0.6</a></dd>
      <dd><a href="/0.5/">0.5</a></dd>
      <dd><a href="/0.4/">0.4</a></dd>
      <dd><a href="/0.3/">0.3</a></dd>
      <dd><a href="/0.2/">0.2</a></dd>
      <dd><a href="/0.1/">0.1</a></dd>
    </dl>
    <hr />
  </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.12.4',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>