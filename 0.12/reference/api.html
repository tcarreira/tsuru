

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API reference &mdash; tsuru 0.12.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Frequently Asked Questions" href="../faq.html" />
    <link rel="prev" title="tsuru.conf reference" href="config.html" /> 

<link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tsuru
          

          
          </a>

          
            
            
              <div class="version">
                0.12.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managing/index.html">Managing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Using</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/index.html">Advanced topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tsuru-client.html">tsuru client usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsuru-admin.html">tsuru-admin usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="crane.html">crane usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bs.html">bs</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">tsuru.conf reference</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#endpoints">1. Endpoints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#apps">1.1 Apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#services">1.2 Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-instances">1.3 Service instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quotas">1.4 Quotas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#healers">1.5 Healers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#platforms">1.6 Platforms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#users">1.7 Users</a></li>
<li class="toctree-l4"><a class="reference internal" href="#teams">1.8 Teams</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deploy">1.9 Deploy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metadata">1.10 Metadata</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tsuru</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference</a> &raquo;</li>
        
      <li>API reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="endpoints">
<h2>1. Endpoints<a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="apps">
<h3>1.1 Apps<a class="headerlink" href="#apps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-apps">
<h4>List apps<a class="headerlink" href="#list-apps" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /apps</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body of the response containing the app list.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">apps</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">82</span>
<span class="p">[{</span><span class="s2">&quot;Ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.10.10.10&quot;</span><span class="p">,</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1&quot;</span><span class="p">,</span><span class="s2">&quot;Units&quot;</span><span class="p">:[{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1/0&quot;</span><span class="p">,</span><span class="s2">&quot;State&quot;</span><span class="p">:</span><span class="s2">&quot;started&quot;</span><span class="p">}]}]</span>
</pre></div>
</div>
</div>
<div class="section" id="info-about-an-app">
<h4>Info about an app<a class="headerlink" href="#info-about-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /apps/&lt;appname&gt;</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and a JSON in the body of the response containing the app content.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">284</span>
<span class="p">{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1&quot;</span><span class="p">,</span><span class="s2">&quot;Framework&quot;</span><span class="p">:</span><span class="s2">&quot;php&quot;</span><span class="p">,</span><span class="s2">&quot;Repository&quot;</span><span class="p">:</span><span class="s2">&quot;git@git.com:php.git&quot;</span><span class="p">,</span><span class="s2">&quot;State&quot;</span><span class="p">:</span><span class="s2">&quot;dead&quot;</span><span class="p">,</span><span class="s2">&quot;Units&quot;</span><span class="p">:[{</span><span class="s2">&quot;Ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.10.10.10&quot;</span><span class="p">,</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1/0&quot;</span><span class="p">,</span><span class="s2">&quot;State&quot;</span><span class="p">:</span><span class="s2">&quot;started&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;Ip&quot;</span><span class="p">:</span><span class="s2">&quot;9.9.9.9&quot;</span><span class="p">,</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1/1&quot;</span><span class="p">,</span><span class="s2">&quot;State&quot;</span><span class="p">:</span><span class="s2">&quot;started&quot;</span><span class="p">},{</span><span class="s2">&quot;Ip&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1/2&quot;</span><span class="p">,</span><span class="s2">&quot;State&quot;</span><span class="p">:</span><span class="s2">&quot;pending&quot;</span><span class="p">}],</span><span class="s2">&quot;Teams&quot;</span><span class="p">:[</span><span class="s2">&quot;tsuruteam&quot;</span><span class="p">,</span><span class="s2">&quot;crane&quot;</span><span class="p">],</span><span class="s2">&quot;Pool&quot;</span><span class="p">:</span> <span class="s2">&quot;mypool&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-an-app">
<h4>Remove an app<a class="headerlink" href="#remove-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /apps/&lt;appname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="create-an-app">
<h4>Create an app<a class="headerlink" href="#create-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /apps</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body of the response containing the status and the URL for Git repository.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">apps</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;repository_url&quot;</span><span class="p">:</span><span class="s2">&quot;git@tsuru.mycompany.com:ble.git&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="restart-an-app">
<h4>Restart an app<a class="headerlink" href="#restart-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /apps/&lt;appname&gt;/restart</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">restart</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="get-app-environment-variables">
<h4>Get app environment variables<a class="headerlink" href="#get-app-environment-variables" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /apps/&lt;appname&gt;/env</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body returning a dictionary with environment names and values.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">env</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;DATABASE_HOST&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="s2">&quot;public&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="set-an-app-environment">
<h4>Set an app environment<a class="headerlink" href="#set-an-app-environment" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /apps/&lt;appname&gt;/env</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">env</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="execute-a-command">
<h4>Execute a command<a class="headerlink" href="#execute-a-command" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /apps/&lt;appname&gt;/run?once=true</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Where:</p>
<ul class="simple">
<li><cite>once</cite> is a boolean and indicates if the command will run just in an
unit(once=true) or all of them(once=false). This parameter is not required,
and the default is false.</li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">run</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">la</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-one-or-more-environment-variables-from-an-app">
<h4>Remove one or more environment variables from an app<a class="headerlink" href="#remove-one-or-more-environment-variables-from-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /apps/&lt;appname&gt;/env</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">env</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="swap-the-address-of-two-apps">
<h4>Swap the address of two apps<a class="headerlink" href="#swap-the-address-of-two-apps" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /swap?app1=appname&amp;app2=anotherapp</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PUT /swap?app1=myapp&amp;app2=anotherapp
</pre></div>
</div>
</div>
<div class="section" id="get-the-logs-of-an-app">
<h4>Get the logs of an app<a class="headerlink" href="#get-the-logs-of-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /apps/appname/log?lines=10&amp;source=web&amp;unit=abc123</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success. Returns 404 if app is not found.</p>
<p>Where:</p>
<ul class="simple">
<li><cite>lines</cite> is the number of the log lines. This parameter is required.</li>
<li><cite>source</cite> is the source of the log, like <cite>tsuru</cite> (tsuru API) or a process.</li>
<li><cite>unit</cite> is the <cite>id</cite> of an unit.</li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET /apps/myapp/log?lines=20&amp;source=web&amp;unit=83535b503c96
Content-Length: 142
[{&quot;Date&quot;:&quot;2014-09-26T00:26:30.036Z&quot;,&quot;Message&quot;:&quot;Booting worker with pid: 53&quot;,&quot;Source&quot;:&quot;web&quot;,&quot;AppName&quot;:&quot;tsuru-dashboard&quot;,&quot;Unit&quot;:&quot;83535b503c96&quot;}]
</pre></div>
</div>
</div>
<div class="section" id="list-available-pools">
<h4>List available pools<a class="headerlink" href="#list-available-pools" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /pools</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">pools</span>
<span class="p">[{</span><span class="s2">&quot;Team&quot;</span><span class="p">:</span><span class="s2">&quot;team1&quot;</span><span class="p">,</span><span class="s2">&quot;Pools&quot;</span><span class="p">:[</span><span class="s2">&quot;pool1&quot;</span><span class="p">,</span><span class="s2">&quot;pool2&quot;</span><span class="p">]},{</span><span class="s2">&quot;Team&quot;</span><span class="p">:</span><span class="s2">&quot;team2&quot;</span><span class="p">,</span><span class="s2">&quot;Pools&quot;</span><span class="p">:[</span><span class="s2">&quot;pool3&quot;</span><span class="p">]}]</span>
</pre></div>
</div>
</div>
<div class="section" id="change-the-pool-of-an-app">
<h4>Change the pool of an app<a class="headerlink" href="#change-the-pool-of-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /apps/&lt;appname&gt;/pool</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success. Returns 404 if app is not found.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">myapp</span><span class="o">/</span><span class="n">pool</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="services">
<h3>1.2 Services<a class="headerlink" href="#services" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-services">
<h4>List services<a class="headerlink" href="#list-services" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /services</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">services</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">67</span>
<span class="p">{</span><span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;mongodb&quot;</span><span class="p">,</span> <span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;my_nosql&quot;</span><span class="p">,</span> <span class="s2">&quot;other-instance&quot;</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-new-service">
<h4>Create a new service<a class="headerlink" href="#create-a-new-service" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /services</li>
<li>Format: yaml</li>
<li>Body: a yaml with the service metadata.</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 403 if the user is not a member of a team.
Returns 500 if the yaml is invalid.
Returns 500 if the service name already exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">services</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="nb">id</span><span class="p">:</span> <span class="n">some_service</span>
<span class="n">endpoint</span><span class="p">:</span>
  <span class="n">production</span><span class="p">:</span> <span class="n">someservice</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-a-service">
<h4>Remove a service<a class="headerlink" href="#remove-a-service" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /services/&lt;servicename&gt;</li>
</ul>
</div></blockquote>
<p>Returns 204 in case of success.
Returns 403 if user has not access to the server.
Returns 403 if service has instances.
Returns 404 if service is not found.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">mongodb</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="update-a-service">
<h4>Update a service<a class="headerlink" href="#update-a-service" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /services</li>
<li>Format: yaml</li>
<li>Body: a yaml with the service metadata.</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 403 if the user is not a member of a team.
Returns 500 if the yaml is invalid.
Returns 500 if the service name already exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">services</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="nb">id</span><span class="p">:</span> <span class="n">some_service</span>
<span class="n">endpoint</span><span class="p">:</span>
  <span class="n">production</span><span class="p">:</span> <span class="n">someservice</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</div>
<div class="section" id="get-info-about-a-service">
<h4>Get info about a service<a class="headerlink" href="#get-info-about-a-service" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /services/&lt;servicename&gt;</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">mongodb</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">[{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="s2">&quot;my-mongo&quot;</span><span class="p">,</span> <span class="s2">&quot;Teams&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;myteam&quot;</span><span class="p">],</span> <span class="s2">&quot;Apps&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;myapp&quot;</span><span class="p">],</span> <span class="s2">&quot;ServiceName&quot;</span><span class="p">:</span> <span class="s2">&quot;mongodb&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-service-documentation">
<h4>Get service documentation<a class="headerlink" href="#get-service-documentation" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /services/&lt;servicename&gt;/doc</li>
<li>Format: text</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">mongodb</span><span class="o">/</span><span class="n">doc</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Mongodb</span> <span class="n">exports</span> <span class="n">the</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="update-service-documentation">
<h4>Update service documentation<a class="headerlink" href="#update-service-documentation" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /services/&lt;servicename&gt;/doc</li>
<li>Format: text</li>
<li>Body: text with the documentation</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">mongodb</span><span class="o">/</span><span class="n">doc</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Body</span><span class="p">:</span> <span class="n">Mongodb</span> <span class="n">exports</span> <span class="n">the</span> <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="grant-access-to-a-service">
<h4>Grant access to a service<a class="headerlink" href="#grant-access-to-a-service" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /services/&lt;servicename&gt;/&lt;teamname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">mongodb</span><span class="o">/</span><span class="n">cobrateam</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="revoke-access-from-a-service">
<h4>Revoke access from a service<a class="headerlink" href="#revoke-access-from-a-service" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /services/&lt;servicename&gt;/&lt;teamname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">mongodb</span><span class="o">/</span><span class="n">cobrateam</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="service-instances">
<h3>1.3 Service instances<a class="headerlink" href="#service-instances" title="Permalink to this headline">¶</a></h3>
<div class="section" id="add-a-new-service-instance">
<h4>Add a new service instance<a class="headerlink" href="#add-a-new-service-instance" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /services/instances</li>
<li>Body: <cite>{“name”: “mymysql”, “service_name”: “mysql”}</cite></li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mymysql&quot;</span><span class="p">,</span> <span class="s2">&quot;service_name&quot;</span><span class="p">:</span> <span class="s2">&quot;mysql&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-a-service-instance">
<h4>Remove a service instance<a class="headerlink" href="#remove-a-service-instance" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /services/instances/&lt;serviceinstancename&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">mymysql</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="bind-a-service-instance-to-an-app">
<h4>Bind a service instance to an app<a class="headerlink" href="#bind-a-service-instance-to-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /services/instances/&lt;serviceinstancename&gt;/&lt;appname&gt;</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON with the environment variables to be exported
in the app environ.
Returns 403 if the user has not access to the app.
Returns 404 if the application does not exists.
Returns 404 if the service instance does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">mymysql</span><span class="o">/</span><span class="n">myapp</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">29</span>
<span class="p">{</span><span class="s2">&quot;DATABASE_HOST&quot;</span><span class="p">:</span><span class="s2">&quot;localhost&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="unbind-a-service-instance-from-an-app">
<h4>Unbind a service instance from an app<a class="headerlink" href="#unbind-a-service-instance-from-an-app" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /services/instances/&lt;serviceinstancename&gt;/&lt;appname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 403 if the user has not access to the app.
Returns 404 if the application does not exists.
Returns 404 if the service instance does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">mymysql</span><span class="o">/</span><span class="n">myapp</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="list-all-services-and-your-instances">
<h4>List all services and your instances<a class="headerlink" href="#list-all-services-and-your-instances" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /services/instances?app=appname</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success and a JSON with the service list.</p>
<p>Where:</p>
<ul class="simple">
<li><cite>app</cite> is the name an app you want to use as filter. If defined only instances
bound to this app will be returned. This parameter is optional.</li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">52</span>
<span class="p">[{</span><span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;redis&quot;</span><span class="p">,</span> <span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;redis-globo&quot;</span><span class="p">]}]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-an-info-about-a-service-instance">
<h4>Get an info about a service instance<a class="headerlink" href="#get-an-info-about-a-service-instance" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /services/instances/&lt;serviceinstancename&gt;</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success and a JSON with the service instance data.
Returns 404 if the service instance does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">mymysql</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">71</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mongo-1&quot;</span><span class="p">,</span> <span class="s2">&quot;servicename&quot;</span><span class="p">:</span> <span class="s2">&quot;mongodb&quot;</span><span class="p">,</span> <span class="s2">&quot;teams&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;apps&quot;</span><span class="p">:</span> <span class="p">[]}</span>
</pre></div>
</div>
</div>
<div class="section" id="service-instance-status">
<h4>service instance status<a class="headerlink" href="#service-instance-status" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /services/instances/&lt;serviceinstancename&gt;/status</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">mymysql</span><span class="o">/</span><span class="n">status</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="grant-access-to-a-service-instance">
<h4>Grant access to a service instance<a class="headerlink" href="#grant-access-to-a-service-instance" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /services/instances/permission/&lt;servicename&gt;/&lt;teamname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">permission</span><span class="o">/</span><span class="n">mongodb</span><span class="o">-</span><span class="n">instance</span><span class="o">/</span><span class="n">cobrateam</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="revoke-access-from-a-service-instance">
<h4>Revoke access from a service instance<a class="headerlink" href="#revoke-access-from-a-service-instance" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /services/instances/permission/&lt;servicename&gt;/&lt;teamname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the service does not exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">instances</span><span class="o">/</span><span class="n">permission</span><span class="o">/</span><span class="n">mongodb</span><span class="o">-</span><span class="n">instance</span><span class="o">/</span><span class="n">cobrateam</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="quotas">
<h3>1.4 Quotas<a class="headerlink" href="#quotas" title="Permalink to this headline">¶</a></h3>
<div class="section" id="get-quota-info-of-a-user">
<h4>Get quota info of a user<a class="headerlink" href="#get-quota-info-of-a-user" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /quota/&lt;user&gt;</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON with the quota info.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">quota</span><span class="o">/</span><span class="n">wolverine</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">29</span>
<span class="p">{</span><span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;available&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="healers">
<h3>1.5 Healers<a class="headerlink" href="#healers" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-healers">
<h4>List healers<a class="headerlink" href="#list-healers" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /healers</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body with a list of healers.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">healers</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">35</span>
<span class="p">[{</span><span class="s2">&quot;app-heal&quot;</span><span class="p">:</span> <span class="s2">&quot;http://healer.com&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="execute-healer">
<h4>Execute healer<a class="headerlink" href="#execute-healer" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /healers/&lt;healer&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">healers</span><span class="o">/</span><span class="n">app</span><span class="o">-</span><span class="n">heal</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="platforms">
<h3>1.6 Platforms<a class="headerlink" href="#platforms" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-platforms">
<h4>List platforms<a class="headerlink" href="#list-platforms" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /platforms</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body with a list of platforms.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">platforms</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">67</span>
<span class="p">[{</span><span class="n">Name</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">},{</span><span class="n">Name</span><span class="p">:</span> <span class="s2">&quot;java&quot;</span><span class="p">},{</span><span class="n">Name</span><span class="p">:</span> <span class="s2">&quot;ruby20&quot;</span><span class="p">},{</span><span class="n">Name</span><span class="p">:</span> <span class="s2">&quot;static&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="users">
<h3>1.7 Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h3>
<div class="section" id="create-a-user">
<h4>Create a user<a class="headerlink" href="#create-a-user" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /users</li>
<li>Body: <cite>{“email”:”nobody&#64;globo.com”,”password”:”123456”}</cite></li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 400 if the JSON is invalid.
Returns 400 if the email is invalid.
Returns 400 if the password characters length is less than 6 and greater than 50.
Returns 409 if the email already exists.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /users HTTP/1.1
Body: `{&quot;email&quot;:&quot;nobody@globo.com&quot;,&quot;password&quot;:&quot;123456&quot;}`
</pre></div>
</div>
</div>
<div class="section" id="reset-password">
<h4>Reset password<a class="headerlink" href="#reset-password" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /users/&lt;email&gt;/password?token=token</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 404 if the user is not found.</p>
<p>The token parameter is optional.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /users/user@email.com/password?token=1234 HTTP/1.1
</pre></div>
</div>
</div>
<div class="section" id="login">
<h4>Login<a class="headerlink" href="#login" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /users/&lt;email&gt;/tokens</li>
<li>Body: <cite>{“password”:”123456”}</cite></li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 400 if the JSON is invalid.
Returns 400 if the password is empty or nil.
Returns 404 if the user is not found.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">user</span><span class="nd">@email</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tokens</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;token&quot;</span><span class="p">:</span><span class="s2">&quot;e275317394fb099f62b3993fd09e5f23b258d55f&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="logout">
<h4>Logout<a class="headerlink" href="#logout" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /users/tokens</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">tokens</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="info-about-the-current-user">
<h4>Info about the current user<a class="headerlink" href="#info-about-the-current-user" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /users/info</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and a JSON with information about the current user.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">info</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;Email&quot;</span><span class="p">:</span><span class="s2">&quot;myuser@company.com&quot;</span><span class="p">,</span><span class="s2">&quot;Teams&quot;</span><span class="p">:[</span><span class="s2">&quot;frontend&quot;</span><span class="p">,</span><span class="s2">&quot;backend&quot;</span><span class="p">,</span><span class="s2">&quot;sysadmin&quot;</span><span class="p">,</span><span class="s2">&quot;full stack&quot;</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="change-password">
<h4>Change password<a class="headerlink" href="#change-password" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /users/password</li>
<li>Body: <cite>{“old”:”123456”,”new”:”654321”}</cite></li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.
Returns 400 if the JSON is invalid.
Returns 400 if the old or new password is empty or nil.
Returns 400 if the new password characters length is less than 6 and greater than 50.
Returns 403 if the old password does not match with the current password.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PUT /users/password HTTP/1.1
Body: `{&quot;old&quot;:&quot;123456&quot;,&quot;new&quot;:&quot;654321&quot;}`
</pre></div>
</div>
</div>
<div class="section" id="remove-a-user">
<h4>Remove a user<a class="headerlink" href="#remove-a-user" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /users</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">users</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="add-public-key-to-user">
<h4>Add public key to user<a class="headerlink" href="#add-public-key-to-user" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /users/keys</li>
<li>Body: <cite>{“key”:”my-key”}</cite></li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>POST /users/keys HTTP/1.1
Body: `{&quot;key&quot;:&quot;my-key&quot;}`
</pre></div>
</div>
</div>
<div class="section" id="remove-public-key-from-user">
<h4>Remove public key from user<a class="headerlink" href="#remove-public-key-from-user" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /users/keys</li>
<li>Body: <cite>{“key”:”my-key”}</cite></li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DELETE /users/keys HTTP/1.1
Body: `{&quot;key&quot;:&quot;my-key&quot;}`
</pre></div>
</div>
</div>
<div class="section" id="show-api-key">
<h4>Show API key<a class="headerlink" href="#show-api-key" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /users/api-key</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body with the API key.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET /users/api-key HTTP/1.1
Body: `{&quot;token&quot;: &quot;e275317394fb099f62b3993fd09e5f23b258d55f&quot;, &quot;users&quot;: &quot;user@email.com&quot;}`
</pre></div>
</div>
</div>
<div class="section" id="regenerate-api-key">
<h4>Regenerate API key<a class="headerlink" href="#regenerate-api-key" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /users/api-key</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">api</span><span class="o">-</span><span class="n">key</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="teams">
<h3>1.8 Teams<a class="headerlink" href="#teams" title="Permalink to this headline">¶</a></h3>
<div class="section" id="list-teams">
<h4>List teams<a class="headerlink" href="#list-teams" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /teams</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body with a list of teams.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">teams</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">22</span>
<span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;teamname&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="info-about-a-team">
<h4>Info about a team<a class="headerlink" href="#info-about-a-team" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /teams/&lt;teamname&gt;</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body with the info about a team.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="n">teamname</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;teamname&quot;</span><span class="p">,</span> <span class="s2">&quot;users&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;user@email.com&quot;</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="add-a-team">
<h4>Add a team<a class="headerlink" href="#add-a-team" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: POST</li>
<li>Endpoint: /teams</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">teams</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;teamname&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-a-team">
<h4>Remove a team<a class="headerlink" href="#remove-a-team" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /teams/&lt;teamname&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELELE</span> <span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="n">myteam</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="add-user-to-team">
<h4>Add user to team<a class="headerlink" href="#add-user-to-team" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: PUT</li>
<li>Endpoint: /teams/&lt;teanmaname&gt;/&lt;username&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PUT</span> <span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="n">myteam</span><span class="o">/</span><span class="n">myuser</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-user-from-team">
<h4>Remove user from team<a class="headerlink" href="#remove-user-from-team" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: DELETE</li>
<li>Endpoint: /teams/&lt;teanmaname&gt;/&lt;username&gt;</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="o">/</span><span class="n">teams</span><span class="o">/</span><span class="n">myteam</span><span class="o">/</span><span class="n">myuser</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="deploy">
<h3>1.9 Deploy<a class="headerlink" href="#deploy" title="Permalink to this headline">¶</a></h3>
<div class="section" id="deploy-list">
<h4>Deploy list<a class="headerlink" href="#deploy-list" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /deploys?app=appname&amp;service=servicename</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body of the response containing the deploy list.</p>
<p>Where:</p>
<ul class="simple">
<li><cite>app</cite> is a <cite>app</cite> name.</li>
<li><cite>service</cite> is a <cite>service</cite> name.</li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">deploys</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">[{</span><span class="s2">&quot;Ip&quot;</span><span class="p">:</span><span class="s2">&quot;10.10.10.10&quot;</span><span class="p">,</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1&quot;</span><span class="p">,</span><span class="s2">&quot;Units&quot;</span><span class="p">:[{</span><span class="s2">&quot;Name&quot;</span><span class="p">:</span><span class="s2">&quot;app1/0&quot;</span><span class="p">,</span><span class="s2">&quot;State&quot;</span><span class="p">:</span><span class="s2">&quot;started&quot;</span><span class="p">}]}]</span>
<span class="p">[{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span><span class="s2">&quot;543c20a09e7aea60156191c0&quot;</span><span class="p">,</span><span class="s2">&quot;App&quot;</span><span class="p">:</span><span class="s2">&quot;myapp&quot;</span><span class="p">,</span><span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2013-11-01T00:01:00-02:00&quot;</span><span class="p">,</span><span class="s2">&quot;Duration&quot;</span><span class="p">:</span><span class="mi">29955456221322857</span><span class="p">,</span><span class="s2">&quot;Commit&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">},{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span><span class="s2">&quot;543c20a09e7aea60156191c1&quot;</span><span class="p">,</span><span class="s2">&quot;App&quot;</span><span class="p">:</span><span class="s2">&quot;yourapp&quot;</span><span class="p">,</span><span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2013-11-01T00:00:01-02:00&quot;</span><span class="p">,</span><span class="s2">&quot;Duration&quot;</span><span class="p">:</span><span class="mi">29955456221322857</span><span class="p">,</span><span class="s2">&quot;Commit&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="get-info-about-a-deploy">
<h4>Get info about a deploy<a class="headerlink" href="#get-info-about-a-deploy" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Format: JSON</li>
<li>Endpoint: /deploys/:deployid</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success. Returns 404 if deploy is not found.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">deploys</span><span class="o">/</span><span class="mi">12345</span>
<span class="p">{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span><span class="s2">&quot;54ff355c283dbed9868f01fb&quot;</span><span class="p">,</span><span class="s2">&quot;App&quot;</span><span class="p">:</span><span class="s2">&quot;tsuru-dashboard&quot;</span><span class="p">,</span><span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span><span class="s2">&quot;2015-03-10T15:18:04.301-03:00&quot;</span><span class="p">,</span><span class="s2">&quot;Duration&quot;</span><span class="p">:</span><span class="mi">20413970850</span><span class="p">,</span><span class="s2">&quot;Commit&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;Image&quot;</span><span class="p">:</span><span class="s2">&quot;192.168.50.4:3030/tsuru/app-tsuru-dashboard:v2&quot;</span><span class="p">,</span><span class="s2">&quot;Log&quot;</span><span class="p">:</span><span class="s2">&quot;[deploy log]&quot;</span><span class="p">,</span><span class="s2">&quot;Origin&quot;</span><span class="p">:</span><span class="s2">&quot;app-deploy&quot;</span><span class="p">,</span><span class="s2">&quot;CanRollback&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span><span class="s2">&quot;RemoveDate&quot;</span><span class="p">:</span><span class="s2">&quot;0001-01-01T00:00:00Z&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="metadata">
<h3>1.10 Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h3>
<div class="section" id="info-about-tsuru-api">
<h4>Info about Tsuru API<a class="headerlink" href="#info-about-tsuru-api" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /info</li>
<li>Format: JSON</li>
</ul>
</div></blockquote>
<p>Returns 200 in case of success, and JSON in the body of the response containing the metadata.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">info</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="p">{</span><span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-healthcheck-of-tsuru-api-server">
<h4>Basic healthcheck of Tsuru API server<a class="headerlink" href="#basic-healthcheck-of-tsuru-api-server" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /healthcheck/</li>
<li>Format: text</li>
</ul>
</div></blockquote>
<p>Always returns 200 and text body of <code class="docutils literal notranslate"><span class="pre">WORKING</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">healthcheck</span><span class="o">/</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="n">WORKING</span>
</pre></div>
</div>
</div>
<div class="section" id="full-healthcheck-of-all-tsuru-components">
<h4>Full healthcheck of all Tsuru components<a class="headerlink" href="#full-healthcheck-of-all-tsuru-components" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li>Method: GET</li>
<li>Endpoint: /healthcheck/?check=all</li>
<li>Format: text</li>
</ul>
</div></blockquote>
<p>Returns 200 when all components have a status of <code class="docutils literal notranslate"><span class="pre">WORKING</span></code>.
Returns 500 if any component does not have a status of <code class="docutils literal notranslate"><span class="pre">WORKING</span></code>.
Body always contains text with status and time to complete check for each component.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GET /healthcheck/?check=all HTTP/1.1
MongoDB: WORKING (643.81µs)
Router Hipache: WORKING (845.457µs)
docker-registry: WORKING (1.954069ms)
Gandalf: WORKING (1.787768ms)
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="config.html" class="btn btn-neutral" title="tsuru.conf reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, tsuru authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Versions</span>
    v: 0.12.4
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dd><a href="/stable/">stable</a></dd>
      <dd><a href="/latest/">latest</a></dd>
      <dd><a href="/main/">main</a></dd>
    </dl>
    <dl>
      <dt>Releases</dt>
      <dd><a href="/1.12/">1.12</a></dd>
      <dd><a href="/1.11/">1.11</a></dd>
      <dd><a href="/1.10/">1.10</a></dd>
      <dd><a href="/1.9/">1.9</a></dd>
      <dd><a href="/1.8/">1.8</a></dd>
      <dd><a href="/1.7/">1.7</a></dd>
      <dd><a href="/1.6/">1.6</a></dd>
      <dd><a href="/1.5/">1.5</a></dd>
      <dd><a href="/1.4/">1.4</a></dd>
      <dd><a href="/1.3/">1.3</a></dd>
      <dd><a href="/1.2/">1.2</a></dd>
      <dd><a href="/1.1/">1.1</a></dd>
      <dd><a href="/1.0/">1.0</a></dd>
      <dd><a href="/0.13/">0.13</a></dd>
      <dd><a href="/0.12/">0.12</a></dd>
      <dd><a href="/0.11/">0.11</a></dd>
      <dd><a href="/0.10/">0.10</a></dd>
      <dd><a href="/0.9/">0.9</a></dd>
      <dd><a href="/0.8/">0.8</a></dd>
      <dd><a href="/0.7/">0.7</a></dd>
      <dd><a href="/0.6/">0.6</a></dd>
      <dd><a href="/0.5/">0.5</a></dd>
      <dd><a href="/0.4/">0.4</a></dd>
      <dd><a href="/0.3/">0.3</a></dd>
      <dd><a href="/0.2/">0.2</a></dd>
      <dd><a href="/0.1/">0.1</a></dd>
    </dl>
    <hr />
  </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.12.4',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>