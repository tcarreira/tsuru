

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installing Tsuru on Google Kubernetes Engine cluster with Helm &mdash; tsuru 1.11.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installing tsuru components" href="installing-tsuru-components.html" />
    <link rel="prev" title="Installing Tsuru in a local Kubernetes cluster with Helm" href="installing-minikube.html" /> 

<link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tsuru
          

          
          </a>

          
            
            
              <div class="version">
                1.11.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">Understanding</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installing-minikube.html">Installing Tsuru in a local Kubernetes cluster with Helm</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installing Tsuru on Google Kubernetes Engine cluster with Helm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-tsuru">Installing Tsuru</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-tsuru">Configuring Tsuru</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installing-tsuru-components.html">Installing tsuru components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../managing/index.html">Managing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Using</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental/index.html">Experimental</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tsuru</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installing</a> &raquo;</li>
        
      <li>Installing Tsuru on Google Kubernetes Engine cluster with Helm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/installing/installing-gke.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-tsuru-on-google-kubernetes-engine-cluster-with-helm">
<span id="installing-tsuru-gke"></span><h1>Installing Tsuru on Google Kubernetes Engine cluster with Helm<a class="headerlink" href="#installing-tsuru-on-google-kubernetes-engine-cluster-with-helm" title="Permalink to this headline">¶</a></h1>
<p>This post will show how to install and configure Tsuru on GKE with Helm.
All steps in this guide were done in Kubernetes v1.22.0. While it might work for almost all Kubernetes versions, some versions may break something. Feel free to report us in that case.
You need to have both gcloud and kubectl previously installed on your machine, if you don’t have it yet, you can install it <a class="reference external" href="https://cloud.google.com/sdk/docs/install/">here</a>, with gcloud and <a class="reference external" href="https://kubernetes.io/docs/tasks/tools/">kubectl</a> properly installed, let’s get started.
To create a Kubernetes cluster using gcloud, run the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gcloud beta container clusters create tsuru-cluster --image-type<span class="o">=</span>COS --machine-type<span class="o">=</span>e2-standard-4 --num-nodes <span class="s2">&quot;2&quot;</span> --zone<span class="o">=</span><span class="nv">$YOUR_PREEFERED_ZONE</span>
</pre></div>
</div>
<p>Download a release of the <a class="reference external" href="https://github.com/helm/helm/releases">Helm client</a>. With helm installed, let’s start</p>
<div class="section" id="installing-tsuru">
<h2>Installing Tsuru<a class="headerlink" href="#installing-tsuru" title="Permalink to this headline">¶</a></h2>
<p>To install Tsuru and its dependencies we will use a helm chart</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ helm repo add tsuru https://tsuru.github.io/charts
</pre></div>
</div>
<p>Now let’s install the chart!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ helm install tsuru tsuru/tsuru-stack --create-namespace --namespace tsuru-system
</pre></div>
</div>
<p>Now you have tsuru installed!!</p>
</div>
<div class="section" id="configuring-tsuru">
<h2>Configuring Tsuru<a class="headerlink" href="#configuring-tsuru" title="Permalink to this headline">¶</a></h2>
<p>Create the admin user on tsuru:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ kubectl <span class="nb">exec</span> -it -n tsuru-system deploy/tsuru-api -- tsurud root user create admin@admin.com# CHANGE IT TO YOUR ADMIN USER <span class="c1">#</span>
</pre></div>
</div>
<p>Add the tsuru target and log in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">TSURU_HOST</span><span class="o">=</span><span class="k">$(</span>kubectl get svc -n tsuru-system tsuru-api -o <span class="s1">&#39;jsonpath={.status.loadBalancer.ingress[].ip}&#39;</span><span class="k">)</span>
$ tsuru target-add gke http://<span class="nv">$TSURU_HOST</span> -s
$ tsuru login
</pre></div>
</div>
<p>Let’s assign the correct IP to default router:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">NGINX_HOST</span><span class="o">=</span><span class="k">$(</span>kubectl get svc -n tsuru-system tsuru-ingress-nginx-controller -o <span class="s1">&#39;jsonpath={.status.loadBalancer.ingress[].ip}&#39;</span><span class="k">)</span>
$ helm upgrade tsuru tsuru/tsuru-stack --namespace tsuru-system -f values.yaml --set kubernetes-router.ingressExpose.domain<span class="o">=</span>cloud.<span class="nv">$NGINX_HOST</span>.nip.io --set kubernetes-router.ingressExpose.port<span class="o">=</span><span class="m">80</span>
</pre></div>
</div>
<p>Create one team:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru team create admin
</pre></div>
</div>
<p>Build Platforms:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru platform add python
$ tsuru platform add go
</pre></div>
</div>
<p>Create and Deploy tsuru-dashboard app:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app create dashboard
$ tsuru app deploy -a dashboard --image tsuru/dashboard
</pre></div>
</div>
<p>Create an app to test:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir example-go
$ <span class="nb">cd</span> example-go
$ git clone https://github.com/tsuru/platforms.git
$ <span class="nb">cd</span> platforms/examples/go
$ tsuru app create example-go go
$ tsuru app deploy -a example-go .
</pre></div>
</div>
<p>Check the app info and get the url:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app info -a example-go
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installing-tsuru-components.html" class="btn btn-neutral float-right" title="Installing tsuru components" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installing-minikube.html" class="btn btn-neutral" title="Installing Tsuru in a local Kubernetes cluster with Helm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, tsuru authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Versions</span>
    v: 1.11.6
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dd><a href="/stable/">stable</a></dd>
      <dd><a href="/latest/">latest</a></dd>
      <dd><a href="/main/">main</a></dd>
    </dl>
    <dl>
      <dt>Releases</dt>
      <dd><a href="/1.12/">1.12</a></dd>
      <dd><a href="/1.11/">1.11</a></dd>
      <dd><a href="/1.10/">1.10</a></dd>
      <dd><a href="/1.9/">1.9</a></dd>
      <dd><a href="/1.8/">1.8</a></dd>
      <dd><a href="/1.7/">1.7</a></dd>
      <dd><a href="/1.6/">1.6</a></dd>
      <dd><a href="/1.5/">1.5</a></dd>
      <dd><a href="/1.4/">1.4</a></dd>
      <dd><a href="/1.3/">1.3</a></dd>
      <dd><a href="/1.2/">1.2</a></dd>
      <dd><a href="/1.1/">1.1</a></dd>
      <dd><a href="/1.0/">1.0</a></dd>
      <dd><a href="/0.13/">0.13</a></dd>
      <dd><a href="/0.12/">0.12</a></dd>
      <dd><a href="/0.11/">0.11</a></dd>
      <dd><a href="/0.10/">0.10</a></dd>
      <dd><a href="/0.9/">0.9</a></dd>
      <dd><a href="/0.8/">0.8</a></dd>
      <dd><a href="/0.7/">0.7</a></dd>
      <dd><a href="/0.6/">0.6</a></dd>
      <dd><a href="/0.5/">0.5</a></dd>
      <dd><a href="/0.4/">0.4</a></dd>
      <dd><a href="/0.3/">0.3</a></dd>
      <dd><a href="/0.2/">0.2</a></dd>
      <dd><a href="/0.1/">0.1</a></dd>
    </dl>
    <hr />
  </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.11.6',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>