

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Event webhooks &mdash; tsuru 1.7.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using" href="../using/index.html" />
    <link rel="prev" title="Volumes" href="volumes.html" /> 

<link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tsuru
          

          
          </a>

          
            
            
              <div class="version">
                1.7.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Managing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="add-platform.html">Installing platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-platform.html">Creating a platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="using-pools.html">Using Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="provisioners.html">Provisioners</a></li>
<li class="toctree-l2"><a class="reference internal" href="clusters.html">Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="segregate-scheduler.html">Segregate Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading-docker.html">Upgrading Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="repositories.html">Managing Git repositories and SSH keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="users-and-permissions.html">Managing users and permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="logs.html">Managing Application Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging-and-troubleshooting.html">Debugging and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="volumes.html">Volumes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Event webhooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configurations">Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#event-filtering-configurations">Event filtering configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hook-request-configurations">Hook request configurations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Using</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/index.html">Advanced topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experimental/index.html">Experimental</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tsuru</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Managing</a> &raquo;</li>
        
      <li>Event webhooks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/managing/event-webhooks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="event-webhooks">
<h1>Event webhooks<a class="headerlink" href="#event-webhooks" title="Permalink to this headline">¶</a></h1>
<p>Event webhooks allow integrating tsuru events with external systems. You can create an event
webhook to notify the occurence of specific event types. When you create an event webhook,
tsuru makes a request to the specified URL for every event according specific filters.</p>
<p>For more info on the client commands for handling webhooks, check
<a class="reference external" href="https://tsuru-client.readthedocs.io/en/master/reference.html#event-webhooks">tsuru client docs</a>.</p>
<div class="section" id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this headline">¶</a></h2>
<p>Event webhook configurations basically involve filtering events and configuring the hook request.</p>
<div class="section" id="event-filtering-configurations">
<h3>Event filtering configurations<a class="headerlink" href="#event-filtering-configurations" title="Permalink to this headline">¶</a></h3>
<p>By default, all events that the webhook creator has access will trigger it. But the events may be
filtered by some criteria:</p>
<ul class="simple">
<li>Error only: triggers only failing events</li>
<li>Success only: triggers only successful events</li>
<li>Kind type: <code class="docutils literal notranslate"><span class="pre">permission</span></code> or <code class="docutils literal notranslate"><span class="pre">internal</span></code></li>
<li>Kind name: one of the values returned by the <code class="docutils literal notranslate"><span class="pre">tsuru</span> <span class="pre">permission-list</span></code> command, like <code class="docutils literal notranslate"><span class="pre">app.create</span></code> or <code class="docutils literal notranslate"><span class="pre">pool.update</span></code></li>
<li>Target type: <code class="docutils literal notranslate"><span class="pre">global</span></code>, <code class="docutils literal notranslate"><span class="pre">app</span></code>, <code class="docutils literal notranslate"><span class="pre">node</span></code>, <code class="docutils literal notranslate"><span class="pre">container</span></code>, <code class="docutils literal notranslate"><span class="pre">pool</span></code>, <code class="docutils literal notranslate"><span class="pre">service</span></code>, <code class="docutils literal notranslate"><span class="pre">service-instance</span></code>, <code class="docutils literal notranslate"><span class="pre">team</span></code>, <code class="docutils literal notranslate"><span class="pre">user</span></code>, <code class="docutils literal notranslate"><span class="pre">iaas</span></code>, <code class="docutils literal notranslate"><span class="pre">role</span></code>, <code class="docutils literal notranslate"><span class="pre">platform</span></code>, <code class="docutils literal notranslate"><span class="pre">plan</span></code>, <code class="docutils literal notranslate"><span class="pre">node-container</span></code>, <code class="docutils literal notranslate"><span class="pre">install-host</span></code>, <code class="docutils literal notranslate"><span class="pre">event-block</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster</span></code>, <code class="docutils literal notranslate"><span class="pre">volume</span></code> or <code class="docutils literal notranslate"><span class="pre">webhook</span></code></li>
<li>Target value: the value according to the target type. When target type is <code class="docutils literal notranslate"><span class="pre">app</span></code>, for instance, target value will be the app name</li>
</ul>
</div>
<div class="section" id="hook-request-configurations">
<h3>Hook request configurations<a class="headerlink" href="#hook-request-configurations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>URL: the URL of the request</li>
<li>Method: <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">PATCH</span></code> or <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">POST</span></code></li>
<li>Headers: HTTP headers, defined in <code class="docutils literal notranslate"><span class="pre">key=value</span></code> format</li>
<li>Body: Payload of the request, used when the method is <code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code> or <code class="docutils literal notranslate"><span class="pre">PATCH</span></code>. Defaults to the serialized event in JSON</li>
<li>Proxy: Proxy server used for the requests</li>
</ul>
<p>The request body may be specified with <a class="reference external" href="https://golang.org/pkg/text/template/">Go templates</a>,
to use event fields as variables. Refer to <a class="reference external" href="https://github.com/tsuru/tsuru/blob/a631ecea624e94875fb35ab25990ebe51b1ebccb/event/event.go#L190-L211">event data</a>
for the available fields.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Notifying every successful app deploy to a <a class="reference external" href="https://slack.com/">Slack</a> channel:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru event-webhook-create my-webhook https://hooks.slack.com/services/...
        -d <span class="s2">&quot;all successful deploys&quot;</span>
        -t &lt;my-team&gt;
        -m POST
        -H Content-Type<span class="o">=</span>application/x-www-form-urlencoded
        -b <span class="s1">&#39;payload={&quot;text&quot;: &quot;[{{.Kind.Name}}]: {{.Target.Type}} {{.Target.Value}}&quot;}&#39;</span>
        --success-only
        --kind-name app.deploy
</pre></div>
</div>
<p>Calling a specific URL every time a specific app is updated:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru event-webhook-create my-webhook &lt;my-url&gt;
        -t &lt;my-team&gt;
        --kind-name app.update
        --target-value &lt;my-app&gt;
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../using/index.html" class="btn btn-neutral float-right" title="Using" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="volumes.html" class="btn btn-neutral" title="Volumes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, tsuru authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Versions</span>
    v: 1.7.6
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dd><a href="/stable/">stable</a></dd>
      <dd><a href="/latest/">latest</a></dd>
      <dd><a href="/main/">main</a></dd>
    </dl>
    <dl>
      <dt>Releases</dt>
      <dd><a href="/1.12/">1.12</a></dd>
      <dd><a href="/1.11/">1.11</a></dd>
      <dd><a href="/1.10/">1.10</a></dd>
      <dd><a href="/1.9/">1.9</a></dd>
      <dd><a href="/1.8/">1.8</a></dd>
      <dd><a href="/1.7/">1.7</a></dd>
      <dd><a href="/1.6/">1.6</a></dd>
      <dd><a href="/1.5/">1.5</a></dd>
      <dd><a href="/1.4/">1.4</a></dd>
      <dd><a href="/1.3/">1.3</a></dd>
      <dd><a href="/1.2/">1.2</a></dd>
      <dd><a href="/1.1/">1.1</a></dd>
      <dd><a href="/1.0/">1.0</a></dd>
      <dd><a href="/0.13/">0.13</a></dd>
      <dd><a href="/0.12/">0.12</a></dd>
      <dd><a href="/0.11/">0.11</a></dd>
      <dd><a href="/0.10/">0.10</a></dd>
      <dd><a href="/0.9/">0.9</a></dd>
      <dd><a href="/0.8/">0.8</a></dd>
      <dd><a href="/0.7/">0.7</a></dd>
      <dd><a href="/0.6/">0.6</a></dd>
      <dd><a href="/0.5/">0.5</a></dd>
      <dd><a href="/0.4/">0.4</a></dd>
      <dd><a href="/0.3/">0.3</a></dd>
      <dd><a href="/0.2/">0.2</a></dd>
      <dd><a href="/0.1/">0.1</a></dd>
    </dl>
    <hr />
  </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.7.6',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>