

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deploying Go applications in tsuru &mdash; tsuru 0.8.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Deploying PHP applications in tsuru" href="php.html" />
    <link rel="prev" title="Deploying Ruby applications in tsuru" href="ruby.html" /> 

<link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tsuru
          

          
          </a>

          
            
            
              <div class="version">
                0.8.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managing/index.html">Managing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Using</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install-client.html">Installing tsuru clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Building your app in tsuru</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">Deploying Python applications in tsuru</a></li>
<li class="toctree-l2"><a class="reference internal" href="ruby.html">Deploying Ruby applications in tsuru</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deploying Go applications in tsuru</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-app-within-tsuru">Creating the app within tsuru</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application-code">Application code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#git-deployment">Git deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-application">Running the application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#going-further">Going further</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="php.html">Deploying PHP applications in tsuru</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildpacks.html">Using Buildpacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="recovery.html">Recovering an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="procfile.html">Procfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsuru.yaml.html">tsuru.yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit-states.html">unit states</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/plugins.html">Guide to create tsuru cli plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Application Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tsuru</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Using</a> &raquo;</li>
        
      <li>Deploying Go applications in tsuru</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/using/go.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploying-go-applications-in-tsuru">
<h1>Deploying Go applications in tsuru<a class="headerlink" href="#deploying-go-applications-in-tsuru" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This document is a hands-on guide to deploying a simple Go web application in
tsuru.</p>
</div>
<div class="section" id="creating-the-app-within-tsuru">
<h2>Creating the app within tsuru<a class="headerlink" href="#creating-the-app-within-tsuru" title="Permalink to this headline">¶</a></h2>
<p>To create an app, you use <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru#hdr-Create_an_app">app-create</a>
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-create &lt;app-name&gt; &lt;app-platform&gt;
</pre></div>
</div>
<p>For go, the app platform is, guess what, <code class="docutils literal notranslate"><span class="pre">go</span></code>! Let’s be over creative
and develop a hello world tutorial-app, let’s call it “helloworld”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-create helloworld go
</pre></div>
</div>
<p>To list all available platforms, use <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru#hdr-Display_the_list_of_available_platforms">platform-list</a>
command.</p>
<p>You can see all your applications using <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru#hdr-List_apps_that_you_have_access_to">app-list</a>
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-list
+-------------+-------------------------+---------+--------+
<span class="p">|</span> Application <span class="p">|</span> Units State Summary     <span class="p">|</span> Address <span class="p">|</span> Ready? <span class="p">|</span>
+-------------+-------------------------+---------+--------+
<span class="p">|</span> helloworld  <span class="p">|</span> <span class="m">0</span> of <span class="m">0</span> units in-service <span class="p">|</span>         <span class="p">|</span> No     <span class="p">|</span>
+-------------+-------------------------+---------+--------+
</pre></div>
</div>
<p>Once your app is ready, you will be able to deploy your code, e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-list
+-------------+-------------------------+-------------+--------+
<span class="p">|</span> Application <span class="p">|</span> Units State Summary     <span class="p">|</span> Address     <span class="p">|</span> Ready? <span class="p">|</span>
+-------------+-------------------------+-------------+--------+
<span class="p">|</span> helloworld  <span class="p">|</span> <span class="m">0</span> of <span class="m">0</span> units in-service <span class="p">|</span>             <span class="p">|</span> Yes    <span class="p">|</span>
+-------------+-------------------------+-------------+--------+
</pre></div>
</div>
</div>
<div class="section" id="application-code">
<h2>Application code<a class="headerlink" href="#application-code" title="Permalink to this headline">¶</a></h2>
<p>A simple web application in go <cite>main.go</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>package main

import <span class="o">(</span>
    <span class="s2">&quot;fmt&quot;</span>
    <span class="s2">&quot;net/http&quot;</span>
<span class="o">)</span>

func main<span class="o">()</span> <span class="o">{</span>
    http.HandleFunc<span class="o">(</span><span class="s2">&quot;/&quot;</span>, hello<span class="o">)</span>
    fmt.Println<span class="o">(</span><span class="s2">&quot;listening...&quot;</span><span class="o">)</span>
    err :<span class="o">=</span> http.ListenAndServe<span class="o">(</span><span class="s2">&quot;:8888&quot;</span>, nil<span class="o">)</span>
    <span class="k">if</span> err !<span class="o">=</span> nil <span class="o">{</span>
        panic<span class="o">(</span>err<span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>

func hello<span class="o">(</span>res http.ResponseWriter, req *http.Request<span class="o">)</span> <span class="o">{</span>
    fmt.Fprintln<span class="o">(</span>res, <span class="s2">&quot;hello, world&quot;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="git-deployment">
<h2>Git deployment<a class="headerlink" href="#git-deployment" title="Permalink to this headline">¶</a></h2>
<p>When you create a new app, tsuru will display the Git remote that you should
use. You can always get it using <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru#hdr-Display_information_about_an_app">app-info</a>
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-info --app blog
Application: go
Repository: git@cloud.tsuru.io:blog.git
Platform: go
Teams: myteam
Address:
</pre></div>
</div>
<p>The git remote will be used to deploy your application using git. You can just
push to tsuru remote and your project will be deployed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$  git push git@cloud.tsuru.io:helloworld.git master
Counting objects: <span class="m">86</span>, <span class="k">done</span>.
Delta compression using up to <span class="m">4</span> threads.
Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">75</span>/75<span class="o">)</span>, <span class="k">done</span>.
Writing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">86</span>/86<span class="o">)</span>, <span class="m">29</span>.75 KiB, <span class="k">done</span>.
Total <span class="m">86</span> <span class="o">(</span>delta <span class="m">2</span><span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>
remote: Cloning into <span class="s1">&#39;/home/application/current&#39;</span>...
remote: requirements.apt not found.
remote: Skipping...
remote: /home/application/current /
<span class="c1">#####################################</span>
<span class="c1">#          OMIT (see below)         #</span>
<span class="c1">#####################################</span>
remote:  ---&gt; App will be restarted, please check its log <span class="k">for</span> more details...
remote:
To git@cloud.tsuru.io:helloworld.git
* <span class="o">[</span>new branch<span class="o">]</span>      master -&gt; master
</pre></div>
</div>
<p>If you get a “Permission denied (publickey).”, make sure you’re member of a
team and have a public key added to tsuru. To add a key, use <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru#hdr-Add_SSH_public_key_to_tsuru_s_git_server">key-add</a>
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru key-add ~/.ssh/id_rsa.pub
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">add</span></code> to avoid typing the entire remote url every time
you want to push:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git remote add tsuru git@cloud.tsuru.io:helloworld.git
</pre></div>
</div>
<p>Then you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git push tsuru master
Everything up-to-date
</pre></div>
</div>
<p>And you will be also able to omit the <code class="docutils literal notranslate"><span class="pre">--app</span></code> flag from now on:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-info
Application: helloworld
Repository: git@cloud.tsuru.io:blog.git
Platform: go
Teams: myteam
Address: helloworld.cloud.tsuru.io
Units:
+--------------+---------+
<span class="p">|</span> Unit         <span class="p">|</span> State   <span class="p">|</span>
+--------------+---------+
<span class="p">|</span> 9e70748f4f25 <span class="p">|</span> started <span class="p">|</span>
+--------------+---------+
</pre></div>
</div>
<p>For more details on the <code class="docutils literal notranslate"><span class="pre">--app</span></code> flag, see <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru#hdr-Guessing_app_names">“Guessing app names”</a>
section of tsuru command documentation.</p>
</div>
<div class="section" id="running-the-application">
<h2>Running the application<a class="headerlink" href="#running-the-application" title="Permalink to this headline">¶</a></h2>
<p>As you can see, in the deploy output there is a step described as “Restarting
your app”. In this step, tsuru will restart your app if it’s running, or start
it if it’s not. But how does tsuru start an application? That’s very simple, it
uses a Procfile (a concept stolen from Foreman). In this Procfile, you describe
how your application should be started. Here is how the Procfile should look like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>web: ./main
</pre></div>
</div>
<p>Now we commit the file and push the changes to tsuru git server, running
another deploy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add Procfile
$ git commit -m <span class="s2">&quot;Procfile: added file&quot;</span>
$ git push tsuru master
<span class="c1">#####################################</span>
<span class="c1">#                OMIT               #</span>
<span class="c1">#####################################</span>
remote:  ---&gt; App will be restarted, please check its log <span class="k">for</span> more details...
remote:
To git@cloud.tsuru.io:helloworld.git
d67c3cd..f2a5d2d  master -&gt; master
</pre></div>
</div>
<p>Now that the app is deployed, you can access it from your browser, getting the
IP or host listed in <code class="docutils literal notranslate"><span class="pre">app-list</span></code> and opening it. For example,
in the list below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru app-list
+-------------+-------------------------+---------------------+--------+
<span class="p">|</span> Application <span class="p">|</span> Units State Summary     <span class="p">|</span> Address             <span class="p">|</span> Ready? <span class="p">|</span>
+-------------+-------------------------+---------------------+--------+
<span class="p">|</span> helloworld  <span class="p">|</span> <span class="m">1</span> of <span class="m">1</span> units in-service <span class="p">|</span> blog.cloud.tsuru.io <span class="p">|</span> Yes    <span class="p">|</span>
+-------------+-------------------------+---------------------+--------+
</pre></div>
</div>
<p>It’s done! Now we have a simple go project deployed on tsuru.</p>
<p>Now we can access your <cite>app</cite> in the URL <a class="reference external" href="http://helloworld.cloud.tsuru.io/">http://helloworld.cloud.tsuru.io/</a>.</p>
</div>
<div class="section" id="going-further">
<h2>Going further<a class="headerlink" href="#going-further" title="Permalink to this headline">¶</a></h2>
<p>For more information, you can dig into <a class="reference external" href="http://docs.tsuru.io">tsuru docs</a>, or
read <a class="reference external" href="http://godoc.org/github.com/tsuru/tsuru-client/tsuru">complete instructions of use for the tsuru command</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="php.html" class="btn btn-neutral float-right" title="Deploying PHP applications in tsuru" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ruby.html" class="btn btn-neutral" title="Deploying Ruby applications in tsuru" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, tsuru authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Versions</span>
    v: 0.8.2
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dd><a href="/stable/">stable</a></dd>
      <dd><a href="/latest/">latest</a></dd>
      <dd><a href="/main/">main</a></dd>
    </dl>
    <dl>
      <dt>Releases</dt>
      <dd><a href="/1.12/">1.12</a></dd>
      <dd><a href="/1.11/">1.11</a></dd>
      <dd><a href="/1.10/">1.10</a></dd>
      <dd><a href="/1.9/">1.9</a></dd>
      <dd><a href="/1.8/">1.8</a></dd>
      <dd><a href="/1.7/">1.7</a></dd>
      <dd><a href="/1.6/">1.6</a></dd>
      <dd><a href="/1.5/">1.5</a></dd>
      <dd><a href="/1.4/">1.4</a></dd>
      <dd><a href="/1.3/">1.3</a></dd>
      <dd><a href="/1.2/">1.2</a></dd>
      <dd><a href="/1.1/">1.1</a></dd>
      <dd><a href="/1.0/">1.0</a></dd>
      <dd><a href="/0.13/">0.13</a></dd>
      <dd><a href="/0.12/">0.12</a></dd>
      <dd><a href="/0.11/">0.11</a></dd>
      <dd><a href="/0.10/">0.10</a></dd>
      <dd><a href="/0.9/">0.9</a></dd>
      <dd><a href="/0.8/">0.8</a></dd>
      <dd><a href="/0.7/">0.7</a></dd>
      <dd><a href="/0.6/">0.6</a></dd>
      <dd><a href="/0.5/">0.5</a></dd>
      <dd><a href="/0.4/">0.4</a></dd>
      <dd><a href="/0.3/">0.3</a></dd>
      <dd><a href="/0.2/">0.2</a></dd>
      <dd><a href="/0.1/">0.1</a></dd>
    </dl>
    <hr />
  </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.8.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>