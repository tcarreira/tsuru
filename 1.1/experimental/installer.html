

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tsuru Installer &mdash; tsuru 1.1.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Roadmap" href="../roadmap.html" />
    <link rel="prev" title="Experimental" href="index.html" /> 

<link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />



  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> tsuru
          

          
          </a>

          
            
            
              <div class="version">
                1.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../managing/index.html">Managing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Using</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/index.html">Advanced topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to tsuru</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Experimental</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">tsuru Installer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-it-works">How it works</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#docker-machine-drivers">Docker Machine drivers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#what-is-installed">What is installed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security">Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customizing-the-installation">Customizing the installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-reference">Configuration reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#name">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-hub-mirror">docker-hub-mirror</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ca-path">ca-path</a></li>
<li class="toctree-l4"><a class="reference internal" href="#driver-name">driver:name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#driver-options">driver:options</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tsuru</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Experimental</a> &raquo;</li>
        
      <li>tsuru Installer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/experimental/installer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tsuru-installer">
<span id="installer"></span><h1>tsuru Installer<a class="headerlink" href="#tsuru-installer" title="Permalink to this headline">¶</a></h1>
<p>tsuru Installer provides a way to install tsuru API and it’s required components
locally or on remote hosts.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">tsuru Installer is distributed inside the tsuru client. To use it, you must
first install the client. Check the tsuru client documentation for a full
reference, including how to install it: <a class="reference external" href="https://tsuru-client.readthedocs.org">https://tsuru-client.readthedocs.org</a>.</p>
</div>
<p>To install tsuru locally, one can simply run
(requires <a class="reference external" href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru install
</pre></div>
</div>
<p>After a couple of minutes you will have a full tsuru installation, inside a local
VirtualBox VM, where you can start deploying your applications and experience the
tsuru workflow.</p>
<div class="section" id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>tsuru installer uses <a class="reference external" href="https://www.docker.com/products/docker-machine">docker machine</a>
to provision docker hosts, this means that it’s possible to use any of the core or
3rd party docker machine drivers on the installation.</p>
<p>It will create a directory inside your <code class="docutils literal notranslate"><span class="pre">~/.tsuru/installs</span></code>, with every file created
and needed by docker machine to manage and provision your hosts: certificates,
configuration files, your CA file etc.</p>
<p>After provisioning the hosts, the installer will install and start every tsuru
component as a docker container on those hosts.</p>
<div class="section" id="docker-machine-drivers">
<h3>Docker Machine drivers<a class="headerlink" href="#docker-machine-drivers" title="Permalink to this headline">¶</a></h3>
<p>Docker Machine drivers are responsible for provisioning docker hosts on different
iaas’. The installer comes bundled with all <a class="reference external" href="https://docs.docker.com/machine/drivers/">docker machine core drivers</a>
and also supports the 3rd party ones; just make sure they are available in your $PATH.</p>
<p>For a list of 3rd party plugins supported by the community
check <a class="reference external" href="https://github.com/docker/machine/blob/master/docs/AVAILABLE_DRIVER_PLUGINS.md">here</a>.</p>
</div>
</div>
<div class="section" id="what-is-installed">
<h2>What is installed<a class="headerlink" href="#what-is-installed" title="Permalink to this headline">¶</a></h2>
<p>Currently, the installer installs the following components:</p>
<ul class="simple">
<li>MongoDB</li>
<li>Redis</li>
<li>PlanB router</li>
<li>Docker Registry</li>
<li>tsuru API</li>
</ul>
<p>After all basic components are installed, it will:</p>
<ul class="simple">
<li>Create a root user on tsurud</li>
<li>Point your tsuru client to the newly created api using <cite>tsuru target-set</cite></li>
<li>Configure a docker node to run your applications</li>
<li>Create and deploy a tsuru-dashboard</li>
</ul>
</div>
<div class="section" id="security">
<h2>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<p>The installer needs to issue commands to the tsuru api during the installation and,
to do so, the host is configured to have the 8080/tcp port opened to the internet.
This is probably not recommended and should be changed as soon as possible after
the installation.</p>
<p>It is also recommended to change the root user login and password that the installer
uses to bootstrap the installation.</p>
</div>
<div class="section" id="customizing-the-installation">
<span id="customize"></span><h2>Customizing the installation<a class="headerlink" href="#customizing-the-installation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">install</span></code> command accepts a configuration file as parameter to customize the
installation.</p>
<p>For example, to install tsuru on amazon ec2, one could create the following file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">driver</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">amazonec2</span>
    <span class="nt">options</span><span class="p">:</span>
        <span class="nt">amazonec2-access-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myAmazonAccessKey</span>
        <span class="nt">amazonec2-secret-key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myAmazonSecretKey</span>
        <span class="nt">amazonec2-vpc-id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vpc-abc1234</span>
        <span class="nt">amazonec2-subnet-id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">subnet-abc1234</span>
</pre></div>
</div>
<p>And pass it to the install command as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tsuru install -c config.yml
</pre></div>
</div>
</div>
<div class="section" id="configuration-reference">
<h2>Configuration reference<a class="headerlink" href="#configuration-reference" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>tsuru uses a colon to represent nesting in YAML. So, whenever this document says
something like <code class="docutils literal notranslate"><span class="pre">key1:key2</span></code>, it refers to the value of the <code class="docutils literal notranslate"><span class="pre">key2</span></code> that is
nested in the block that is the value of <code class="docutils literal notranslate"><span class="pre">key1</span></code>. For example,
<code class="docutils literal notranslate"><span class="pre">database:url</span></code> means:</p>
<div class="last highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">database</span><span class="p">:</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="name">
<h3>name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h3>
<p>The name of the installation, e.g, tsuru-ec2, tsuru-local. This will be the name
of the directory created inside <code class="docutils literal notranslate"><span class="pre">~/.tsuru/installs</span></code> and the tsuru target name
for the api.</p>
</div>
<div class="section" id="docker-hub-mirror">
<h3>docker-hub-mirror<a class="headerlink" href="#docker-hub-mirror" title="Permalink to this headline">¶</a></h3>
<p>Url of a docker hub mirror used to fetch the components docker images. The default
is to use no mirror.</p>
</div>
<div class="section" id="ca-path">
<h3>ca-path<a class="headerlink" href="#ca-path" title="Permalink to this headline">¶</a></h3>
<p>A path to a directory containing a ca.pem and ca-key.pem files that are going to
be used to sign certificates used by docker and docker registry. If not set,
one will be created.</p>
</div>
<div class="section" id="driver-name">
<h3>driver:name<a class="headerlink" href="#driver-name" title="Permalink to this headline">¶</a></h3>
<p>Name of the driver to be used by the installer. This can be any core or 3rd party
driver supported by docker machine. If a 3rd party driver name is used, it’s binary
must be available on the user path. The default is to use virtualbox.</p>
</div>
<div class="section" id="driver-options">
<h3>driver:options<a class="headerlink" href="#driver-options" title="Permalink to this headline">¶</a></h3>
<p>Under this namespace every driver parameters can be set. Refer to the driver
configuration for more information on what parameter are available. For exemple,
the AWS docker machine driver accepts the <code class="docutils literal notranslate"><span class="pre">--amazonec2-secret-key</span></code> argument and
this can be set using <code class="docutils literal notranslate"><span class="pre">driver:options:amazonec2-secret-key</span></code> entry.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../roadmap.html" class="btn btn-neutral float-right" title="Roadmap" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Experimental" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, tsuru authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Versions</span>
    v: 1.1.2
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dd><a href="/stable/">stable</a></dd>
      <dd><a href="/latest/">latest</a></dd>
      <dd><a href="/main/">main</a></dd>
    </dl>
    <dl>
      <dt>Releases</dt>
      <dd><a href="/1.12/">1.12</a></dd>
      <dd><a href="/1.11/">1.11</a></dd>
      <dd><a href="/1.10/">1.10</a></dd>
      <dd><a href="/1.9/">1.9</a></dd>
      <dd><a href="/1.8/">1.8</a></dd>
      <dd><a href="/1.7/">1.7</a></dd>
      <dd><a href="/1.6/">1.6</a></dd>
      <dd><a href="/1.5/">1.5</a></dd>
      <dd><a href="/1.4/">1.4</a></dd>
      <dd><a href="/1.3/">1.3</a></dd>
      <dd><a href="/1.2/">1.2</a></dd>
      <dd><a href="/1.1/">1.1</a></dd>
      <dd><a href="/1.0/">1.0</a></dd>
      <dd><a href="/0.13/">0.13</a></dd>
      <dd><a href="/0.12/">0.12</a></dd>
      <dd><a href="/0.11/">0.11</a></dd>
      <dd><a href="/0.10/">0.10</a></dd>
      <dd><a href="/0.9/">0.9</a></dd>
      <dd><a href="/0.8/">0.8</a></dd>
      <dd><a href="/0.7/">0.7</a></dd>
      <dd><a href="/0.6/">0.6</a></dd>
      <dd><a href="/0.5/">0.5</a></dd>
      <dd><a href="/0.4/">0.4</a></dd>
      <dd><a href="/0.3/">0.3</a></dd>
      <dd><a href="/0.2/">0.2</a></dd>
      <dd><a href="/0.1/">0.1</a></dd>
    </dl>
    <hr />
  </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.1.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>